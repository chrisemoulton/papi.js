(function(window,undefined){(function(window,undefined){var AFTER,BEFORE,COMMON_EVENTS,EventEmitter,FIRE,FormData,NativeFormData,NativeXMLHttp,OFF,ON,READY_STATE,UPLOAD_EVENTS,XHookFormData,XHookHttpRequest,XMLHTTP,convertHeaders,depricatedProp,document,fakeEvent,mergeObjects,msie,proxyEvents,slice,xhook,_base,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};document=window.document,BEFORE="before",AFTER="after",READY_STATE="readyState",ON="addEventListener",OFF="removeEventListener",FIRE="dispatchEvent",XMLHTTP="XMLHttpRequest",FormData="FormData",UPLOAD_EVENTS=["load","loadend","loadstart"],COMMON_EVENTS=["progress","abort","error","timeout"],msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(msie)&&(msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),(_base=Array.prototype).indexOf||(_base.indexOf=function(item){var i,x,_i,_len;for(i=_i=0,_len=this.length;_len>_i;i=++_i)if(x=this[i],x===item)return i;return-1}),slice=function(o,n){return Array.prototype.slice.call(o,n)},depricatedProp=function(p){return"returnValue"===p||"totalSize"===p||"position"===p},mergeObjects=function(src,dst){var k,v;for(k in src)if(v=src[k],!depricatedProp(k))try{dst[k]=src[k]}catch(_error){}return dst},proxyEvents=function(events,src,dst){var event,p,_i,_len;for(p=function(event){return function(e){var clone,k,val;clone={};for(k in e)depricatedProp(k)||(val=e[k],clone[k]=val===src?dst:val);return dst[FIRE](event,clone)}},_i=0,_len=events.length;_len>_i;_i++)event=events[_i],dst._has(event)&&(src["on"+event]=p(event))},fakeEvent=function(type){var msieEventObject;if(null!=document.createEventObject)return msieEventObject=document.createEventObject(),msieEventObject.type=type,msieEventObject;try{return new Event(type)}catch(_error){return{type:type}}},EventEmitter=function(nodeStyle){var emitter,events,listeners;return events={},listeners=function(event){return events[event]||[]},emitter={},emitter[ON]=function(event,callback,i){events[event]=listeners(event),events[event].indexOf(callback)>=0||(i=i===undefined?events[event].length:i,events[event].splice(i,0,callback))},emitter[OFF]=function(event,callback){var i;return event===undefined?void(events={}):(callback===undefined&&(events[event]=[]),i=listeners(event).indexOf(callback),void(-1!==i&&listeners(event).splice(i,1)))},emitter[FIRE]=function(){var args,event,i,legacylistener,listener,_i,_len,_ref;for(args=slice(arguments),event=args.shift(),nodeStyle||(args[0]=mergeObjects(args[0],fakeEvent(event))),legacylistener=emitter["on"+event],legacylistener&&legacylistener.apply(undefined,args),_ref=listeners(event).concat(listeners("*")),i=_i=0,_len=_ref.length;_len>_i;i=++_i)listener=_ref[i],listener.apply(undefined,args)},emitter._has=function(event){return!(!events[event]&&!emitter["on"+event])},nodeStyle&&(emitter.listeners=function(event){return slice(listeners(event))},emitter.on=emitter[ON],emitter.off=emitter[OFF],emitter.fire=emitter[FIRE],emitter.once=function(e,fn){var fire;return fire=function(){return emitter.off(e,fire),fn.apply(null,arguments)},emitter.on(e,fire)},emitter.destroy=function(){return events={}}),emitter},xhook=EventEmitter(!0),xhook.EventEmitter=EventEmitter,xhook[BEFORE]=function(handler,i){if(handler.length<1||handler.length>2)throw"invalid hook";return xhook[ON](BEFORE,handler,i)},xhook[AFTER]=function(handler,i){if(handler.length<2||handler.length>3)throw"invalid hook";return xhook[ON](AFTER,handler,i)},xhook.enable=function(){window[XMLHTTP]=XHookHttpRequest,NativeFormData&&(window[FormData]=XHookFormData)},xhook.disable=function(){window[XMLHTTP]=xhook[XMLHTTP],window[FormData]=NativeFormData},convertHeaders=xhook.headers=function(h,dest){var header,headers,k,name,v,value,_i,_len,_ref;switch(null==dest&&(dest={}),typeof h){case"object":headers=[];for(k in h)v=h[k],name=k.toLowerCase(),headers.push(""+name+":	"+v);return headers.join("\n");case"string":for(headers=h.split("\n"),_i=0,_len=headers.length;_len>_i;_i++)header=headers[_i],/([^:]+):\s*(.+)/.test(header)&&(name=null!=(_ref=RegExp.$1)?_ref.toLowerCase():void 0,value=RegExp.$2,null==dest[name]&&(dest[name]=value));return dest}},NativeFormData=window[FormData],XHookFormData=function(form){var entries;this.fd=form?new NativeFormData(form):new NativeFormData,this.form=form,entries=[],Object.defineProperty(this,"entries",{get:function(){var fentries;return fentries=form?slice(form.querySelectorAll("input,select")).filter(function(e){var _ref;return"checkbox"!==(_ref=e.type)&&"radio"!==_ref||e.checked}).map(function(e){return[e.name,"file"===e.type?e.files:e.value]}):[],fentries.concat(entries)}}),this.append=function(_this){return function(){var args;return args=slice(arguments),entries.push(args),_this.fd.append.apply(_this.fd,args)}}(this)},NativeFormData&&(xhook[FormData]=NativeFormData,window[FormData]=XHookFormData),NativeXMLHttp=window[XMLHTTP],xhook[XMLHTTP]=NativeXMLHttp,XHookHttpRequest=window[XMLHTTP]=function(){var ABORTED,currentState,emitFinal,emitReadyState,facade,hasError,hasErrorHandler,readBody,readHead,request,response,setReadyState,status,transiting,writeBody,writeHead,xhr;return ABORTED=-1,xhr=new xhook[XMLHTTP],request={},status=null,hasError=void 0,transiting=void 0,response=void 0,readHead=function(){var key,name,val,_ref;if(response.status=status||xhr.status,status===ABORTED&&10>msie||(response.statusText=xhr.statusText),status!==ABORTED){_ref=convertHeaders(xhr.getAllResponseHeaders());for(key in _ref)val=_ref[key],response.headers[key]||(name=key.toLowerCase(),response.headers[name]=val)}},readBody=function(){xhr.responseType&&"text"!==xhr.responseType?"document"===xhr.responseType?(response.xml=xhr.responseXML,response.data=xhr.responseXML):response.data=xhr.response:(response.text=xhr.responseText,response.data=xhr.responseText),"responseURL"in xhr&&(response.finalUrl=xhr.responseURL)},writeHead=function(){facade.status=response.status,facade.statusText=response.statusText},writeBody=function(){"text"in response&&(facade.responseText=response.text),"xml"in response&&(facade.responseXML=response.xml),"data"in response&&(facade.response=response.data),"finalUrl"in response&&(facade.responseURL=response.finalUrl)},emitReadyState=function(n){for(;n>currentState&&4>currentState;)facade[READY_STATE]=++currentState,1===currentState&&facade[FIRE]("loadstart",{}),2===currentState&&writeHead(),4===currentState&&(writeHead(),writeBody()),facade[FIRE]("readystatechange",{}),4===currentState&&setTimeout(emitFinal,0)},emitFinal=function(){hasError||facade[FIRE]("load",{}),facade[FIRE]("loadend",{}),hasError&&(facade[READY_STATE]=0)},currentState=0,setReadyState=function(n){var hooks,process;return 4!==n?void emitReadyState(n):(hooks=xhook.listeners(AFTER),process=function(){var hook;return hooks.length?(hook=hooks.shift(),2===hook.length?(hook(request,response),process()):3===hook.length&&request.async?hook(request,response,process):process()):emitReadyState(4)},void process())},facade=request.xhr=EventEmitter(),xhr.onreadystatechange=function(event){try{2===xhr[READY_STATE]&&readHead()}catch(_error){}4===xhr[READY_STATE]&&(transiting=!1,readHead(),readBody()),setReadyState(xhr[READY_STATE])},hasErrorHandler=function(){hasError=!0},facade[ON]("error",hasErrorHandler),facade[ON]("timeout",hasErrorHandler),facade[ON]("abort",hasErrorHandler),facade[ON]("progress",function(){3>currentState?setReadyState(3):facade[FIRE]("readystatechange",{})}),("withCredentials"in xhr||xhook.addWithCredentials)&&(facade.withCredentials=!1),facade.status=0,facade.open=function(method,url,async,user,pass){currentState=0,hasError=!1,transiting=!1,request.headers={},request.headerNames={},request.status=0,response={},response.headers={},request.method=method,request.url=url,request.async=async!==!1,request.user=user,request.pass=pass,setReadyState(1)},facade.send=function(body){var hooks,k,modk,process,send,_i,_len,_ref;for(_ref=["type","timeout","withCredentials"],_i=0,_len=_ref.length;_len>_i;_i++)k=_ref[_i],modk="type"===k?"responseType":k,modk in facade&&(request[k]=facade[modk]);request.body=body,send=function(){var header,value,_j,_len1,_ref1,_ref2;for(proxyEvents(COMMON_EVENTS,xhr,facade),facade.upload&&proxyEvents(COMMON_EVENTS.concat(UPLOAD_EVENTS),xhr.upload,facade.upload),transiting=!0,xhr.open(request.method,request.url,request.async,request.user,request.pass),_ref1=["type","timeout","withCredentials"],_j=0,_len1=_ref1.length;_len1>_j;_j++)k=_ref1[_j],modk="type"===k?"responseType":k,k in request&&(xhr[modk]=request[k]);_ref2=request.headers;for(header in _ref2)value=_ref2[header],xhr.setRequestHeader(header,value);request.body instanceof XHookFormData&&(request.body=request.body.fd),xhr.send(request.body)},hooks=xhook.listeners(BEFORE),(process=function(){var done,hook;return hooks.length?(done=function(userResponse){return"object"!=typeof userResponse||"number"!=typeof userResponse.status&&"number"!=typeof response.status?void process():(mergeObjects(userResponse,response),__indexOf.call(userResponse,"data")<0&&(userResponse.data=userResponse.response||userResponse.text),void setReadyState(4))},done.head=function(userResponse){return mergeObjects(userResponse,response),setReadyState(2)},done.progress=function(userResponse){return mergeObjects(userResponse,response),setReadyState(3)},hook=hooks.shift(),1===hook.length?done(hook(request)):2===hook.length&&request.async?hook(request,done):done()):send()})()},facade.abort=function(){status=ABORTED,transiting?xhr.abort():facade[FIRE]("abort",{})},facade.setRequestHeader=function(header,value){var lName,name;lName=null!=header?header.toLowerCase():void 0,name=request.headerNames[lName]=request.headerNames[lName]||header,request.headers[name]&&(value=request.headers[name]+", "+value),request.headers[name]=value},facade.getResponseHeader=function(header){var name;return name=null!=header?header.toLowerCase():void 0,response.headers[name]},facade.getAllResponseHeaders=function(){return convertHeaders(response.headers)},xhr.overrideMimeType&&(facade.overrideMimeType=function(){return xhr.overrideMimeType.apply(xhr,arguments)}),xhr.upload&&(facade.upload=request.upload=EventEmitter()),facade},"function"==typeof this.define&&this.define.amd?define("xhook",[],function(){return xhook}):(this.exports||this).xhook=xhook}).call(this,window);var CHECK_INTERVAL,COMPAT_VERSION,XD_CHECK,console,cookies,createSocket,currentOrigin,document,emitter,feature,frames,getFrame,guid,handleSocket,initMaster,initSlave,initdMaster,initdSlave,instOf,jsonEncode,location,log,logger,masters,onMessage,parseUrl,setupEmitter,slaves,slice,sockets,startPostMessage,strip,toRegExp,warn,xdomain,xhook,_i,_len,_ref;initdMaster=!1,slaves=function(s){var origin,path;initdMaster||initMaster();for(origin in s)path=s[origin],log("adding slave: "+origin),slaves[origin]=path},frames={},getFrame=function(origin,proxyPath){var frame;return frames[origin]?frames[origin]:(frame=document.createElement("iframe"),frame.id=frame.name=guid(),log("creating iframe "+frame.id),frame.src=""+origin+proxyPath,frame.setAttribute("style","display:none;"),document.body.appendChild(frame),frames[origin]=frame.contentWindow)},initMaster=function(){var convertFormData,convertToArrayBuffer,handleRequest;return initdMaster=!0,convertToArrayBuffer=function(args,done){var isBlob,isFile,name,obj,reader;return name=args[0],obj=args[1],isBlob=instOf(obj,"Blob"),isFile=instOf(obj,"File"),isBlob||isFile?(reader=new FileReader,reader.onload=function(){return args[1]=null,isFile&&(args[2]=obj.name),done(["XD_BLOB",args,this.result,obj.type])},reader.readAsArrayBuffer(obj),1):0},convertFormData=function(entries,send){var c;entries.forEach(function(args,i){var file,name,value,_i,_len;if(name=args[0],value=args[1],instOf(value,"FileList"))for(entries.splice(i,1),_i=0,_len=value.length;_len>_i;_i++)file=value[_i],entries.splice(i,0,[name,file])}),c=0,entries.forEach(function(args,i){c+=convertToArrayBuffer(args,function(newargs){entries[i]=newargs,0===--c&&send()})}),0===c&&send()},handleRequest=function(request,socket){var entries,obj,send;return socket.on("xhr-event",function(){return request.xhr.dispatchEvent.apply(null,arguments)}),socket.on("xhr-upload-event",function(){return request.xhr.upload.dispatchEvent.apply(null,arguments)}),obj=strip(request),obj.headers=request.headers,request.withCredentials&&(cookies.master&&(obj.headers[cookies.master]=document.cookie),obj.slaveCookie=cookies.slave),send=function(){return socket.emit("request",obj)},request.body&&(obj.body=request.body,instOf(obj.body,"FormData"))?(entries=obj.body.entries,obj.body=["XD_FD",entries],void convertFormData(entries,send)):void send()},"addWithCredentials"in xhook||(xhook.addWithCredentials=!0),xhook.before(function(request,callback){var frame,p,socket;return p=parseUrl(request.url),p&&p.origin!==currentOrigin?slaves[p.origin]?(log("proxying request to slave: '"+p.origin+"'"),request.async===!1?(warn("sync not supported"),callback()):(frame=getFrame(p.origin,slaves[p.origin]),socket=createSocket(guid(),frame),socket.on("response",function(resp){return callback(resp),socket.close()}),request.xhr.addEventListener("abort",function(){return socket.emit("abort")}),void(socket.ready?handleRequest(request,socket):socket.once("ready",function(){return handleRequest(request,socket)})))):(p&&log("no slave matching: '"+p.origin+"'"),callback()):callback()})},initdSlave=!1,masters=function(m){var origin,path;initdSlave||initSlave();for(origin in m)path=m[origin],log("adding master: "+origin),masters[origin]=path},handleSocket=null,initSlave=function(){return initdSlave=!0,log("handling incoming sockets..."),handleSocket=function(origin,socket){var master,masterRegex,pathRegex,regex;"null"===origin&&(origin="*"),pathRegex=null;for(master in masters){regex=masters[master];try{if(masterRegex=toRegExp(master),masterRegex.test(origin)){pathRegex=toRegExp(regex);break}}catch(_error){}}return pathRegex?(socket.once("request",function(req){var args,blob,entries,fd,k,p,v,xhr,_i,_len,_ref;if(log("request: "+req.method+" "+req.url),p=parseUrl(req.url),!p||!pathRegex.test(p.path))return warn("blocked request to path: '"+p.path+"' by regex: "+pathRegex),void socket.close();xhr=new XMLHttpRequest,xhr.open(req.method,req.url),xhr.addEventListener("*",function(e){return socket.emit("xhr-event",e.type,strip(e))}),xhr.upload&&xhr.upload.addEventListener("*",function(e){return socket.emit("xhr-upload-event",e.type,strip(e))}),socket.once("abort",function(){return xhr.abort()}),xhr.onreadystatechange=function(){var resp;if(4===xhr.readyState){resp={status:xhr.status,statusText:xhr.statusText,data:xhr.response,headers:xhook.headers(xhr.getAllResponseHeaders())};try{resp.text=xhr.responseText}catch(_error){}return socket.emit("response",resp)}},req.withCredentials&&(xhr.withCredentials=!0,req.slaveCookie&&(req.headers[req.slaveCookie]=document.cookie)),req.timeout&&(xhr.timeout=req.timeout),req.type&&(xhr.responseType=req.type),_ref=req.headers;for(k in _ref)v=_ref[k],xhr.setRequestHeader(k,v);if(req.body instanceof Array&&"XD_FD"===req.body[0]){for(fd=new xhook.FormData,entries=req.body[1],_i=0,_len=entries.length;_len>_i;_i++)args=entries[_i],"XD_BLOB"===args[0]&&4===args.length&&(blob=new Blob([args[2]],{type:args[3]}),args=args[1],args[1]=blob),fd.append.apply(fd,args);req.body=fd}xhr.send(req.body||null)}),void log("slave listening for requests on socket: "+socket.id)):void warn("blocked request from: '"+origin+"'")},window===window.parent?warn("slaves must be in an iframe"):window.parent.postMessage("XDPING_"+COMPAT_VERSION,"*")},XD_CHECK="XD_CHECK",sockets={},jsonEncode=!0,createSocket=function(id,frame){var check,checks,emit,pendingEmits,ready,sock;return ready=!1,sock=sockets[id]=xhook.EventEmitter(!0),sock.id=id,sock.once("close",function(){return sock.destroy(),sock.close()}),pendingEmits=[],sock.emit=function(){var args,extra;args=slice(arguments),extra="string"==typeof args[1]?" -> "+args[1]:"",log("send socket: "+id+": "+args[0]+extra),args.unshift(id),ready?emit(args):pendingEmits.push(args)},emit=function(args){jsonEncode&&(args=JSON.stringify(args)),frame.postMessage(args,"*")},sock.close=function(){sock.emit("close"),log("close socket: "+id),sockets[id]=null},sock.once(XD_CHECK,function(obj){for(jsonEncode="string"==typeof obj,ready=sock.ready=!0,sock.emit("ready"),log("ready socket: "+id+" (emit #"+pendingEmits.length+" pending)");pendingEmits.length;)emit(pendingEmits.shift())}),checks=0,check=function(_this){return function(){frame.postMessage([id,XD_CHECK,{}],"*"),ready||(checks++>=xdomain.timeout/CHECK_INTERVAL?(warn("Timeout waiting on iframe socket"),emitter.fire("timeout"),sock.fire("abort")):setTimeout(check,CHECK_INTERVAL))}}(this),setTimeout(check),log("new socket: "+id),sock},onMessage=function(fn){return document.addEventListener?window.addEventListener("message",fn):window.attachEvent("onmessage",fn)},startPostMessage=function(){return onMessage(function(e){var d,extra,id,sock;if(d=e.data,"string"==typeof d){if(/^XDPING(_(V\d+))?$/.test(d)&&RegExp.$2!==COMPAT_VERSION)return warn("your master is not compatible with your slave, check your xdomain.js version");if(/^xdomain-/.test(d))d=d.split(",");else if(jsonEncode)try{d=JSON.parse(d)}catch(_error){return}}if(d instanceof Array&&(id=d.shift(),/^xdomain-/.test(id)&&(sock=sockets[id],null!==sock))){if(sock===undefined){if(!handleSocket)return;sock=createSocket(id,e.source),handleSocket(e.origin,sock)}extra="string"==typeof d[1]?" -> "+d[1]:"",log("receive socket: "+id+": "+d[0]+extra),sock.fire.apply(sock,d)}})},xhook=(this.exports||this).xhook,xdomain=function(o){o&&(o.masters&&masters(o.masters),o.slaves&&slaves(o.slaves))},xdomain.masters=masters,xdomain.slaves=slaves,xdomain.debug=!1,xdomain.timeout=15e3,CHECK_INTERVAL=100,cookies=xdomain.cookies={master:"Master-Cookie",slave:"Slave-Cookie"},document=window.document,location=window.location,currentOrigin=xdomain.origin=location.protocol+"//"+location.host,guid=function(){return"xdomain-"+Math.round(Math.random()*Math.pow(2,32)).toString(16)},slice=function(o,n){return Array.prototype.slice.call(o,n)},console=window.console||{},emitter=null,setupEmitter=function(){emitter=xhook.EventEmitter(!0),xdomain.on=emitter.on,xdomain.off=emitter.off},xhook&&setupEmitter(),logger=function(type){return function(str){str="xdomain ("+currentOrigin+"): "+str,emitter.fire(type,str),("log"!==type||xdomain.debug)&&(type in xdomain?xdomain[type](str):type in console?console[type](str):"warn"===type&&alert(str))}},log=logger("log"),warn=logger("warn"),_ref=["postMessage","JSON"];for(_i=0,_len=_ref.length;_len>_i;_i++)if(feature=_ref[_i],!window[feature])return void warn("requires '"+feature+"' and this browser does not support it");instOf=function(obj,global){return global in window?obj instanceof window[global]:!1},COMPAT_VERSION="V1",parseUrl=xdomain.parseUrl=function(url){return/^((https?:)?\/\/[^\/\?]+)(\/.*)?/.test(url)?{origin:(RegExp.$2?"":location.protocol)+RegExp.$1,path:RegExp.$3}:(log("failed to parse absolute url: "+url),null)},toRegExp=function(obj){var str;return obj instanceof RegExp?obj:(str=obj.toString().replace(/\W/g,function(str){return"\\"+str}).replace(/\\\*/g,".*"),new RegExp("^"+str+"$"))},strip=function(src){var dst,k,v,_ref1;dst={};for(k in src)"returnValue"!==k&&(v=src[k],"function"!=(_ref1=typeof v)&&"object"!==_ref1&&(dst[k]=v));return dst},function(){var attrs,fn,k,prefix,script,_j,_k,_len1,_len2,_ref1,_ref2;for(attrs={debug:function(value){return"string"==typeof value?xdomain.debug="false"!==value:void 0},slave:function(value){var p,s;if(value&&(p=parseUrl(value)))return s={},s[p.origin]=p.path,slaves(s)},master:function(value){var m,p;if(value&&(p="*"===value?{origin:"*",path:"*"}:parseUrl(value)))return m={},m[p.origin]=p.path.replace(/^\//,"")?p.path:"*",masters(m)}},_ref1=document.getElementsByTagName("script"),_j=0,_len1=_ref1.length;_len1>_j;_j++)if(script=_ref1[_j],/xdomain/.test(script.src))for(_ref2=["","data-"],_k=0,_len2=_ref2.length;_len2>_k;_k++){prefix=_ref2[_k];for(k in attrs)(fn=attrs[k])(script.getAttribute(prefix+k))}}(),startPostMessage(),"function"==typeof this.define&&this.define.amd?define("xdomain",["xhook"],function(xh){return xhook=xh,setupEmitter(),xdomain}):(this.exports||this).xdomain=xdomain}).call(this,window),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Papi=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(global){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function deepClone(obj){return JSON.parse(JSON.stringify(obj))}function singularize$1(string){return string.replace(/s$/,"")}function singularize(string){return string.replace(/s$/,"")}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function classify(string){return singularize((0,_map2["default"])(string.split("_"),function(s){return capitalize(s)}).join(""))}function hasXDomain(){return"undefined"!=typeof window&&null!=window.xdomain}var _last=require("lodash/array/last"),_last2=_interopRequireDefault(_last),_all=require("lodash/collection/all"),_all2=_interopRequireDefault(_all),_pick=require("lodash/object/pick"),_pick2=_interopRequireDefault(_pick),_functions=require("lodash/object/functions"),_functions2=_interopRequireDefault(_functions),_keys=require("lodash/object/keys"),_keys2=_interopRequireDefault(_keys),_difference=require("lodash/array/difference"),_difference2=_interopRequireDefault(_difference),_filter=require("lodash/collection/filter"),_filter2=_interopRequireDefault(_filter),_isArray=require("lodash/lang/isArray"),_isArray2=_interopRequireDefault(_isArray),_isNumber=require("lodash/lang/isNumber"),_isNumber2=_interopRequireDefault(_isNumber),_where=require("lodash/collection/where"),_where2=_interopRequireDefault(_where),_findWhere=require("lodash/collection/findWhere"),_findWhere2=_interopRequireDefault(_findWhere),_detect=require("lodash/collection/detect"),_detect2=_interopRequireDefault(_detect),_isObject=require("lodash/lang/isObject"),_isObject2=_interopRequireDefault(_isObject),_clone=require("lodash/lang/clone"),_clone2=_interopRequireDefault(_clone),_extend=require("lodash/object/extend"),_extend2=_interopRequireDefault(_extend),_map=require("lodash/collection/map"),_map2=_interopRequireDefault(_map),_each=require("lodash/collection/each"),_each2=_interopRequireDefault(_each),_isEmpty=require("lodash/lang/isEmpty"),_isEmpty2=_interopRequireDefault(_isEmpty),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_promiz=require("promiz"),_promiz2=_interopRequireDefault(_promiz),_isomorphicFetch=require("isomorphic-fetch"),_isomorphicFetch2=_interopRequireDefault(_isomorphicFetch),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),parseHTTPLinks=function(linksString){var links={};return linksString&&!(0,_isEmpty2["default"])(linksString)&&(0,_each2["default"])(linksString.split(","),function(link){var _link$split=link.split(";"),href=_link$split[0],rel=_link$split[1];href=href.replace(/<(.*)>/,"$1").trim(),rel=rel.replace(/rel="(.*)"/,"$1").trim(),links[rel]=href}),links},Resource=function(){function Resource(api,parentResource){var _this=this,inherit=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];_classCallCheck(this,Resource);var def=this.constructor.definition;if("undefined"==typeof def)throw new Error("Resource: Must supply a proper definition");if(this.api=api,this.options={},this.name=def.name,this.key=def.key,this.children=(0,_map2["default"])(def.children,function(child,name){return name})||[],this.depth=parentResource?parentResource.depth+1:1,this.route=deepClone(def.route),this.route.queryParams={},this.actions=deepClone(def.actions),parentResource){var parentParams={};(0,_each2["default"])(parentResource.route.params,function(value,paramName){parentResource.key!=_this.key&&"id"==paramName&&(paramName=singularize$1(parentResource.name)+"Id"),parentParams[paramName]=value}),(0,_extend2["default"])(this.route.params,parentParams),inherit&&(this.route.queryParams=(0,_clone2["default"])(parentResource.route.queryParams))}this.parent=function(){return parentResource||def.parent&&this.api.$resource(def.parent.key)||null}}return Resource.prototype.createResource=function(){var inherit=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return new this.constructor(this.api,this,inherit)},Resource.prototype.request=function(){var _this2=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],path=options.action?this.buildActionPath(options.action):this.buildPath();return this.api.request(options.method||"get",path,(0,_extend2["default"])({},this.options,{query:(0,_extend2["default"])({},this.route.queryParams,options.query),data:options.data})).then(function(res){return _this2.setResponse(res),res.data})},Resource.prototype.buildPath=function(){var route=this.route.segments.join("");return(0,_each2["default"])(this.route.params,function(value,paramName){route=route.replace("/:"+paramName,value?"/"+value:"")}),route},Resource.prototype.buildActionPath=function(action){var segments=this.route.segments;action.options.routeSegment&&segments.splice(segments.length-1,1,action.options.routeSegment);var route=segments.join("");return(0,_each2["default"])(this.route.params,function(value,paramName){route=route.replace("/:"+paramName,value?"/"+value:"")}),route+=action.options.path?action.options.path:"/"+action.name},Resource.prototype.includeParams=function(params){var _this3=this;return(0,_each2["default"])(params,function(value,paramName){_this3.route.params.hasOwnProperty(paramName)?_this3.route.params[paramName]=value:_this3.route.queryParams[paramName]=value}),this},Resource.prototype.query=function(params){return(0,_extend2["default"])(this.route.queryParams,params),this},Resource.prototype.limit=function(rpp){return this.query({limit:rpp}),this},Resource.prototype.timeout=function(ms){return this.options.timeout=ms,this},Resource.prototype.$get=function(params){var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateModel(res)})},Resource.prototype.$find=function(params){params&&!(0,_isObject2["default"])(params)&&(params={id:params});var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateModel(res)})},Resource.prototype.$all=function(params){var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateCollection(res)})},Resource.prototype.$create=function(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],resource=this.createResource();return resource.hydrateModel(data,{newRecord:!0})},Resource.prototype.setResponse=function(res){this.status=res.status,this.headers=res.headers,this.links={},res.headers&&res.headers.has("Link")&&(this.links=parseHTTPLinks(res.headers.get("Link")))},Resource.prototype.sync=function(data){var _this4=this;data[this.route.paramName]&&(this.route.params[this.route.paramName]=data[this.route.paramName]),(0,_each2["default"])(this.actions,function(action){_this4.route.params[action.options.paramName]=data[action.options.paramName]})},Resource.prototype.hydrateModel=function(data){var _this5=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],model=new this.constructor.modelClass(data);return options.newRecord||(model.$newRecord=!1),this.sync(data),model.$resource=function(name){return(0,_isEmpty2["default"])(name)?_this5:_this5.api.$resource(name,_this5)},model},Resource.prototype.hydrateCollection=function(data){var _this6=this,collection=(0,_map2["default"])(data,function(item){var resource=_this6.createResource(),model=resource.hydrateModel(item);return model}),getPage=function(page){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _this6.links&&_this6.links.hasOwnProperty(page)?_this6.api.request("get",_this6.links[page]).then(function(res){if(options.append||options.prepend){_this6.setResponse(res);var method=options.append?"push":"unshift";return(0,_each2["default"])(res.data,function(item){collection[method](_this6.hydrateModel(item))}),collection}return _this6.setResponse(res),_this6.hydrateCollection(res.data)}):void 0},methods={$resource:function(){return _this6},$nextPage:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return getPage("next",options)},$prevPage:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return getPage("prev",options)},$hasPage:function(name){return _this6.links&&_this6.links.hasOwnProperty(name)},$find:function(id){return(0,_detect2["default"])(collection,function(item){return item.id==id})},$findWhere:function(params){return(0,_findWhere2["default"])(collection,params)},$where:function(params){return(0,_where2["default"])(collection,params)},$create:function(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],resource=_this6.createResource();return resource.hydrateModel(data,{newRecord:!0})},$add:function(){var model=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],idx=arguments[1],applySorting=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return"object"!=("undefined"==typeof model?"undefined":_typeof(model))||model instanceof _this6.constructor.modelClass||(model=collection.$create(model)),(0,_isNumber2["default"])(idx)?collection.splice(idx,0,model):collection.push(model),applySorting&&collection.$sort(),model},$remove:function(arg){if((0,_isArray2["default"])(arg)){var models=arg;return(0,_each2["default"])(models,function(model){collection.$remove(model)}),models}var idx;return(0,_isNumber2["default"])(arg)?idx=arg:arg instanceof _this6.constructor.modelClass&&(idx=collection.indexOf(arg)),idx>=0&&idx<collection.length?collection.splice(idx,1)[0]:void 0},$reposition:function(fromIdx,toIdx){if(fromIdx!=toIdx&&fromIdx>=0&&fromIdx<collection.length&&toIdx>=0&&toIdx<collection.length){var model=collection.$remove(fromIdx);if(model)return collection.$add(model,toIdx,!1)}},$sort:function(){},$delete:function(model){var params=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return model instanceof _this6.constructor.modelClass?model.$delete(params).then(function(){
return collection.$remove(model)}):void 0}};return(0,_extend2["default"])(collection,methods),collection},Resource}(),Model=function(){function Model(data){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,Model),(0,_extend2["default"])(this,data),this.$newRecord=!0}return Model.prototype.$delete=function(params){return this.$resource().request({method:"delete",query:params})},Model.prototype.$save=function(params){var _this7=this,method=this.$newRecord?"post":"put";return this.$resource().request({method:method,data:this,query:params}).then(function(res){return _this7.$newRecord=!1,_this7.$resource().sync(res),(0,_extend2["default"])(_this7,res)})},Model.prototype.$attributes=function(){return(0,_filter2["default"])((0,_difference2["default"])((0,_keys2["default"])(this),(0,_functions2["default"])(this)),function(x){return"$"!=x[0]})},Model.prototype.$data=function(){return(0,_pick2["default"])(this,this.$attributes())},Model}(),Account=function(_Model){function Account(){return _classCallCheck(this,Account),_possibleConstructorReturn(this,_Model.apply(this,arguments))}return _inherits(Account,_Model),Account}(Model),Organization=function(_Model2){function Organization(){return _classCallCheck(this,Organization),_possibleConstructorReturn(this,_Model2.apply(this,arguments))}return _inherits(Organization,_Model2),Organization}(Model),App=function(_Model3){function App(){return _classCallCheck(this,App),_possibleConstructorReturn(this,_Model3.apply(this,arguments))}return _inherits(App,_Model3),App}(Model),DISPLAY_STATES={VISIBLE:1,FEATURED:2,HIGHLIGHTED:4,LOCKED:8},Asset=function(_Model4){function Asset(){return _classCallCheck(this,Asset),_possibleConstructorReturn(this,_Model4.apply(this,arguments))}return _inherits(Asset,_Model4),Asset.prototype.isVisible=function(){return(this.display_state&DISPLAY_STATES.VISIBLE)===DISPLAY_STATES.VISIBLE},Asset.prototype.isHidden=function(){return(this.display_state&DISPLAY_STATES.VISIBLE)!==DISPLAY_STATES.VISIBLE},Asset.prototype.isFeatured=function(){return(this.display_state&DISPLAY_STATES.FEATURED)===DISPLAY_STATES.FEATURED},Asset.prototype.isHighlighted=function(){return(this.display_state&DISPLAY_STATES.HIGHLIGHTED)===DISPLAY_STATES.HIGHLIGHTED},Asset.prototype.isLocked=function(){return(this.display_state&DISPLAY_STATES.LOCKED)===DISPLAY_STATES.LOCKED},Asset.prototype.isOriginal=function(){return(0,_all2["default"])((0,_pick2["default"])(this.source,"network","uid","url"),_isEmpty2["default"])},Asset}(Model),CodeRevision=function(_Model5){function CodeRevision(){return _classCallCheck(this,CodeRevision),_possibleConstructorReturn(this,_Model5.apply(this,arguments))}return _inherits(CodeRevision,_Model5),CodeRevision}(Model),Collection=function(_Model6){function Collection(){return _classCallCheck(this,Collection),_possibleConstructorReturn(this,_Model6.apply(this,arguments))}return _inherits(Collection,_Model6),Collection}(Model),Comment=function(_Model7){function Comment(){return _classCallCheck(this,Comment),_possibleConstructorReturn(this,_Model7.apply(this,arguments))}return _inherits(Comment,_Model7),Comment}(Model),Draft=function(_Model8){function Draft(){return _classCallCheck(this,Draft),_possibleConstructorReturn(this,_Model8.apply(this,arguments))}return _inherits(Draft,_Model8),Draft}(Model),Feed=function(_Model9){function Feed(){return _classCallCheck(this,Feed),_possibleConstructorReturn(this,_Model9.apply(this,arguments))}return _inherits(Feed,_Model9),Feed}(Model),FeedAsset=function(_Model10){function FeedAsset(){return _classCallCheck(this,FeedAsset),_possibleConstructorReturn(this,_Model10.apply(this,arguments))}return _inherits(FeedAsset,_Model10),FeedAsset}(Model),Hub=function(_Model11){function Hub(){return _classCallCheck(this,Hub),_possibleConstructorReturn(this,_Model11.apply(this,arguments))}return _inherits(Hub,_Model11),Hub}(Model),Invite=function(_Model12){function Invite(){return _classCallCheck(this,Invite),_possibleConstructorReturn(this,_Model12.apply(this,arguments))}return _inherits(Invite,_Model12),Invite}(Model),Like=function(_Model13){function Like(){return _classCallCheck(this,Like),_possibleConstructorReturn(this,_Model13.apply(this,arguments))}return _inherits(Like,_Model13),Like}(Model),Recommendation=function(_Model14){function Recommendation(){return _classCallCheck(this,Recommendation),_possibleConstructorReturn(this,_Model14.apply(this,arguments))}return _inherits(Recommendation,_Model14),Recommendation}(Model),Style=function(_Model15){function Style(){return _classCallCheck(this,Style),_possibleConstructorReturn(this,_Model15.apply(this,arguments))}return _inherits(Style,_Model15),Style}(Model),Tag=function(_Model16){function Tag(){return _classCallCheck(this,Tag),_possibleConstructorReturn(this,_Model16.apply(this,arguments))}return _inherits(Tag,_Model16),Tag}(Model),User=function(_Model17){function User(){return _classCallCheck(this,User),_possibleConstructorReturn(this,_Model17.apply(this,arguments))}return _inherits(User,_Model17),User.prototype.hasAccess=function(){return 0===this.access.status},User}(Model),models=Object.freeze({Base:Model,Account:Account,Organization:Organization,App:App,Asset:Asset,CodeRevision:CodeRevision,Collection:Collection,Comment:Comment,Draft:Draft,Feed:Feed,FeedAsset:FeedAsset,Hub:Hub,Invite:Invite,Like:Like,Recommendation:Recommendation,Style:Style,Tag:Tag,User:User}),buildRoute=function(resource){var path,current=resource,segments=[];if(current.options.route)path=current.options.route;else{for(;current;){var paramName=current.options.routeSegment?parseRouteParams(current.options.routeSegment)[0]:current.options.paramName||"id";current!==resource&&(paramName=singularize(current.name)+capitalize(paramName));var routeSegment=current.options.routeSegment?current.options.routeSegment.replace(/\/:[^\/]+$/,"/:"+paramName):"/"+current.name+"/:"+paramName;segments.unshift(routeSegment),current=current.parent}path=segments.join("")}var params={};return(0,_each2["default"])(parseRouteParams(path),function(paramName){params[paramName]=null}),{path:path,segments:segments,segment:segments[segments.length-1],params:params,paramName:resource.options.paramName||"id"}},reRouteParams=/:[^\/]+/gi,parseRouteParams=function(route){return(0,_map2["default"])(route.match(reRouteParams),function(param){return param.slice(1)})},buildKey=function(resource,name){for(var current=resource,segments=[];current;)segments.unshift(current.name),current=current.parent;return segments.join(".")},ResourceSchema=function(){function ResourceSchema(){_classCallCheck(this,ResourceSchema)}return ResourceSchema.prototype.$resource=function(){var key=arguments[0];if("undefined"==typeof key)throw new Error("$resource: key is undefined");var name=(0,_last2["default"])(key.split(".")),params=!(0,_isObject2["default"])(arguments[1])||arguments[1]instanceof Resource?void 0:arguments[1],parentResource=arguments[2]||!params&&arguments[1]||void 0;if(parentResource){if(-1==parentResource.children.indexOf(name))throw new Error("$resource: key not found in parent resource.");key=parentResource.key+"."+name}return new this.constructor.resourceClasses[key](this,parentResource).includeParams(params)},ResourceSchema}();ResourceSchema.defineSchema=function(){var API=this;API.models=models,API.resourceClasses={};var pointer=function pointer(bucket,parentPointer){return{current:null,resource:function(name,options){options=options||{};var parent=parentPointer?parentPointer.current:null,def={name:name,parent:parent,children:{},options:options};options.link&&(def.link=options.link),def.key=buildKey(def),def.route=buildRoute(def),def.actions=[],def.modelName=options.modelName||classify(name),this.current=bucket[name]=def;var resourceClass=function(_Resource){function resourceClass(){return _classCallCheck(this,resourceClass),_possibleConstructorReturn(this,_Resource.apply(this,arguments))}return _inherits(resourceClass,_Resource),resourceClass}(Resource);return resourceClass.definition=def,resourceClass.modelClass=models[def.modelName]||Model,API.resourceClasses[def.key]=resourceClass,this},open:function(){return pointer(this.current.children,this)},close:function(){return parentPointer},action:function action(method,name,options){var action={method:method,name:name,options:options};action.options.routeSegment&&(action.options.paramName=parseRouteParams(action.options.routeSegment)[0]),parentPointer&&parentPointer.current&&parentPointer.current.actions.push(action);var resourceClass=API.resourceClasses[parentPointer.current.key];if("resource"==options.on){if(resourceClass.prototype.hasOwnProperty("$"+name))throw"Attempted to create an action '"+name+"' that already exists.";resourceClass.prototype["$"+name]=function(){var _this26=this,data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.request((0,_extend2["default"])({method:method,action:action},{data:data})).then(function(res){return(0,_isArray2["default"])(res)?_this26.hydrateCollection(res):_this26.hydrateModel(res)})}}else if("member"==options.on){if(resourceClass.prototype.hasOwnProperty("$"+name))throw"Attempted to create an action '"+name+"' that already exists.";resourceClass.prototype["$"+name]=function(){var _this27=this,data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.request((0,_extend2["default"])({method:method,action:action},{data:data})).then(function(res){return _this27.hydrateModel(res)})},resourceClass.modelClass.prototype["$"+name]=function(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$resource()["$"+name](data)}}return this},get:function(){return this.action.apply(this,["get"].concat(Array.prototype.slice.call(arguments)))},post:function(){return this.action.apply(this,["post"].concat(Array.prototype.slice.call(arguments)))},put:function(){return this.action.apply(this,["put"].concat(Array.prototype.slice.call(arguments)))},patch:function(){return this.action.apply(this,["patch"].concat(Array.prototype.slice.call(arguments)))},"delete":function(){return this.action.apply(this,["delete"].concat(Array.prototype.slice.call(arguments)))}}};return(0,_extend2["default"])({},pointer({}))},global.Promise||(global.Promise=_promiz2["default"]);var AbortablePromise=require("dodgy");global.fetch||(global.fetch=_isomorphicFetch2["default"]);var Papi=function(_ResourceSchema){function Papi(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Papi);var _this28=_possibleConstructorReturn(this,_ResourceSchema.apply(this,arguments));if(_this28.options=options,_this28.options.host=options.host||"https://api.pressly.com",hasXDomain()){var slaves={};slaves[_this28.options.host]="/proxy.html",window.xdomain.slaves(slaves)}return _this28.requestMiddlewares=[],_this28.responseMiddlewares=[],_this28.metrics={sendEvent:function(type,message){_this28.request("post","/metrix/events/"+type,message)}},_this28.auth={session:null,get:function(){return _this28.request("get","/session").then(function(res){return _this28.auth.set(res.data)})},set:function(session){if(!session.jwt)throw new Error("Papi:Auth: Invalid session response - missing jwt");return _this28.auth.session=session,_this28.auth.session},isLoggedIn:function(){return!!_this28.auth.session&&!_this28.auth.isExpired()},isExpired:function(){return!1},login:function(email,password){return _this28.request("post","/auth",{data:{email:email,password:password}}).then(function(res){return _this28.auth.set(res.data)})},requestPasswordReset:function(email){return _this28.request("post","/auth/password_reset",{data:{email:email}})},logout:function(){return _this28.auth.session=null,_this28.request("delete","/session").then(function(res){return res})}},_this28}return _inherits(Papi,_ResourceSchema),Papi.prototype.request=function(method,path){var _this29=this,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return new AbortablePromise(function(resolve,reject,onAbort){var url=/^(https?:)?\/\//.test(path)?path:_this29.options.host+path,req={url:url,method:method,headers:{},query:{}};req.headers["Content-Type"]="application/json","function"!=typeof req.withCredentials||hasXDomain()||(req.credentials="include"),_this29.auth.session&&_this29.auth.session.jwt&&(req.headers.Authorization="Bearer "+_this29.auth.session.jwt),req.headers.Accept="application/vnd.pressly.v0.12+json",options.query&&(0,_extend2["default"])(req.query,options.query),options.data&&("get"==method?(0,_extend2["default"])(req.query,options.data):req.body=JSON.stringify(options.data)),(0,_isEmpty2["default"])(req.query)||(req.url+="?"+_querystring2["default"].stringify(req.query));var res={},beginRequest=function(){if(_this29.requestMiddlewares.length){var offset=0,next=function next(){var layer=_this29.requestMiddlewares[++offset]||endRequest;return layer(req,res,next,resolve,reject)};_this29.requestMiddlewares[0](req,res,next,resolve,reject)}else endRequest()},endRequest=function(){fetch(req.url,req).then(function(response){return response.status>=200&&response.status<300?(res=response,void response.json().then(function(data){res.data=data||{}})["catch"](function(err){res.data={}}).then(function(){beginResponse()})):reject(response)})["catch"](function(err){return reject(err)})},beginResponse=function(){if(_this29.responseMiddlewares.length){var offset=0,next=function next(){var layer=_this29.responseMiddlewares[++offset]||endResponse;return layer(req,res,next,resolve,reject)};_this29.responseMiddlewares[0](req,res,next,resolve,reject)}else endResponse()},endResponse=function(){resolve(res)};onAbort(function(why){}),beginRequest()})},Papi.prototype.before=function(middleware){this.requestMiddlewares.push(middleware)},Papi.prototype.after=function(middleware){this.responseMiddlewares.push(middleware)},Papi}(ResourceSchema);module.exports=Papi,void 0==Papi.defineSchema&&(Papi.defineSchema=ResourceSchema.defineSchema),Papi.defineSchema().resource("accounts").open().get("available",{on:"resource"}).post("become",{on:"member"}).resource("users").resource("hubs",{link:"hubs"}).close().resource("organizations").open().resource("users").resource("hubs").resource("invites").open().post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().close().resource("activity").resource("posts",{routeSegment:"/stream/posts/:id"}).resource("hubs").open().get("search",{on:"resource"}).post("upgrade",{on:"member"}).post("follow",{on:"member"})["delete"]("unfollow",{on:"member",path:"/follow"}).get("reach",{on:"member"}).resource("apps").open().get("current",{on:"resource"}).get("build",{on:"member",path:"/build_app"}).get("status",{on:"member"}).resource("styles").close().resource("addons").open().resource("configs").close().resource("analytics").open().get("summary",{on:"resource"}).get("visitors",{on:"resource"}).get("pageviews",{on:"resource"}).get("duration",{on:"resource"}).close().resource("feeds").open().resource("assets",{modelName:"FeedAsset"}).close().resource("invites").open().post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().resource("recommendations").resource("users").open().post("grant_access",{on:"resource"})["delete"]("revoke_access",{on:"member"}).close().resource("collaborators",{modelName:"User"}).resource("collections").open().put("reorder",{on:"resource"}).close().resource("tags").resource("assets",{routeSegment:"/stream/:id"}).open().put("feature",{on:"member"}).put("unfeature",{on:"member"}).put("hide",{on:"member"}).put("unhide",{on:"member"}).put("lock",{on:"member"}).put("unlock",{on:"member"}).resource("likes").resource("comments").close().resource("drafts").open().put("publish",{on:"member"}).close().close().resource("invites").open().get("incoming",{on:"resource"}).get("outgoing",{on:"resource"}).post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).put("accept",{on:"member",routeSegment:"/invites/:hash"}).put("reject",{on:"member",routeSegment:"/invites/:hash"}).close().resource("code_revisions").open().get("fetch_repo",{on:"member"}).resource("hubs",{link:"hubs"}).close().resource("signup").open().get("account_uid_available",{on:"member"}).get("account_email_available",{on:"member"}).close().resource("users").open().get("roles",{on:"resource"}).resource("hubs").resource("organizations").close().resource("discover").open().resource("users",{link:"users"}).resource("organizations",{link:"organizations"}).resource("hubs",{link:"hubs"}).resource("posts").close().resource("creds").open().post("share",{on:"member"}).close().resource("stream").open().close()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{dodgy:2,"isomorphic-fetch":3,"lodash/array/difference":4,"lodash/array/last":5,"lodash/collection/all":6,"lodash/collection/detect":7,"lodash/collection/each":8,"lodash/collection/filter":10,"lodash/collection/findWhere":12,"lodash/collection/map":14,"lodash/collection/where":15,"lodash/lang/clone":85,"lodash/lang/isArray":87,"lodash/lang/isEmpty":88,"lodash/lang/isNumber":91,"lodash/lang/isObject":92,"lodash/object/extend":96,"lodash/object/functions":97,"lodash/object/keys":98,"lodash/object/pick":101,promiz:104,querystring:107}],2:[function(require,module,exports){/*!
Copyright (C) 2015 by Andrea Giammarchi - @WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
function Dodgy(callback,resolvable){var resolve,reject,abort,done=!1,dog=new Promise(function(res,rej){callback(resolve=function(how){done=!0,res(how)},reject=function(why){done=!0,rej(why)},function(callback){abort=function(why){done||reject(callback((done=!0)&&why))}})});return abort?dodger(dog,!!resolvable,resolve,reject,abort):dog}function dodger(dog,resolvable,resolve,reject,abort){function wrap(previous){return function(){return dodger(previous.apply(dog,arguments),resolvable,resolve,reject,abort)}}return dog.then=wrap(dog.then),dog["catch"]=wrap(dog["catch"]),dog.abort=abort,resolvable&&(dog.resolve=resolve,dog.reject=reject),dog}module.exports=Dodgy,Dodgy.Promise=Dodgy},{}],3:[function(require,module,exports){require("whatwg-fetch"),module.exports=self.fetch.bind(self)},{"whatwg-fetch":108}],4:[function(require,module,exports){var baseDifference=require("../internal/baseDifference"),baseFlatten=require("../internal/baseFlatten"),isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike"),restParam=require("../function/restParam"),difference=restParam(function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,!1,!0)):[]});module.exports=difference},{"../function/restParam":16,"../internal/baseDifference":30,"../internal/baseFlatten":36,"../internal/isArrayLike":73,"../internal/isObjectLike":78}],5:[function(require,module,exports){function last(array){var length=array?array.length:0;return length?array[length-1]:void 0}module.exports=last},{}],6:[function(require,module,exports){module.exports=require("./every")},{"./every":9}],7:[function(require,module,exports){module.exports=require("./find")},{"./find":11}],8:[function(require,module,exports){module.exports=require("./forEach")},{"./forEach":13}],9:[function(require,module,exports){function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=void 0),"function"==typeof predicate&&void 0===thisArg||(predicate=baseCallback(predicate,thisArg,3)),func(collection,predicate)}var arrayEvery=require("../internal/arrayEvery"),baseCallback=require("../internal/baseCallback"),baseEvery=require("../internal/baseEvery"),isArray=require("../lang/isArray"),isIterateeCall=require("../internal/isIterateeCall");module.exports=every},{"../internal/arrayEvery":20,"../internal/baseCallback":27,"../internal/baseEvery":32,"../internal/isIterateeCall":75,"../lang/isArray":87}],10:[function(require,module,exports){function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=baseCallback(predicate,thisArg,3),func(collection,predicate)}var arrayFilter=require("../internal/arrayFilter"),baseCallback=require("../internal/baseCallback"),baseFilter=require("../internal/baseFilter"),isArray=require("../lang/isArray");module.exports=filter},{"../internal/arrayFilter":21,"../internal/baseCallback":27,"../internal/baseFilter":33,"../lang/isArray":87}],11:[function(require,module,exports){var baseEach=require("../internal/baseEach"),createFind=require("../internal/createFind"),find=createFind(baseEach);module.exports=find},{"../internal/baseEach":31,"../internal/createFind":61}],12:[function(require,module,exports){function findWhere(collection,source){return find(collection,baseMatches(source))}var baseMatches=require("../internal/baseMatches"),find=require("./find");module.exports=findWhere},{"../internal/baseMatches":47,"./find":11}],13:[function(require,module,exports){var arrayEach=require("../internal/arrayEach"),baseEach=require("../internal/baseEach"),createForEach=require("../internal/createForEach"),forEach=createForEach(arrayEach,baseEach);module.exports=forEach},{"../internal/arrayEach":19,"../internal/baseEach":31,"../internal/createForEach":62}],14:[function(require,module,exports){function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;return iteratee=baseCallback(iteratee,thisArg,3),func(collection,iteratee)}var arrayMap=require("../internal/arrayMap"),baseCallback=require("../internal/baseCallback"),baseMap=require("../internal/baseMap"),isArray=require("../lang/isArray");module.exports=map},{"../internal/arrayMap":22,"../internal/baseCallback":27,"../internal/baseMap":46,"../lang/isArray":87}],15:[function(require,module,exports){function where(collection,source){return filter(collection,baseMatches(source))}var baseMatches=require("../internal/baseMatches"),filter=require("./filter");module.exports=where},{"../internal/baseMatches":47,"./filter":10}],16:[function(require,module,exports){function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(void 0===start?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam},{}],17:[function(require,module,exports){(function(global){function SetCache(values){var length=values?values.length:0;for(this.data={hash:nativeCreate(null),set:new Set};length--;)this.push(values[length])}var cachePush=require("./cachePush"),getNative=require("./getNative"),Set=getNative(global,"Set"),nativeCreate=getNative(Object,"create");SetCache.prototype.push=cachePush,module.exports=SetCache}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":56,"./getNative":68}],18:[function(require,module,exports){function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}module.exports=arrayCopy},{}],19:[function(require,module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}module.exports=arrayEach},{}],20:[function(require,module,exports){function arrayEvery(array,predicate){for(var index=-1,length=array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}module.exports=arrayEvery},{}],21:[function(require,module,exports){function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}module.exports=arrayFilter},{}],22:[function(require,module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}module.exports=arrayMap},{}],23:[function(require,module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}module.exports=arrayPush},{}],24:[function(require,module,exports){function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}module.exports=arraySome},{}],25:[function(require,module,exports){function assignWith(object,source,customizer){for(var index=-1,props=keys(source),length=props.length;++index<length;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(void 0!==value||key in object)||(object[key]=result)}return object}var keys=require("../object/keys");module.exports=assignWith},{"../object/keys":98}],26:[function(require,module,exports){function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}var baseCopy=require("./baseCopy"),keys=require("../object/keys");module.exports=baseAssign},{"../object/keys":98,"./baseCopy":29}],27:[function(require,module,exports){function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?void 0===thisArg?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):void 0===thisArg?property(func):baseMatchesProperty(func,thisArg)}var baseMatches=require("./baseMatches"),baseMatchesProperty=require("./baseMatchesProperty"),bindCallback=require("./bindCallback"),identity=require("../utility/identity"),property=require("../utility/property");module.exports=baseCallback},{"../utility/identity":102,"../utility/property":103,"./baseMatches":47,"./baseMatchesProperty":48,"./bindCallback":53}],28:[function(require,module,exports){function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}var arrayCopy=require("./arrayCopy"),arrayEach=require("./arrayEach"),baseAssign=require("./baseAssign"),baseForOwn=require("./baseForOwn"),initCloneArray=require("./initCloneArray"),initCloneByTag=require("./initCloneByTag"),initCloneObject=require("./initCloneObject"),isArray=require("../lang/isArray"),isObject=require("../lang/isObject"),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectProto=Object.prototype,objToString=objectProto.toString;module.exports=baseClone},{"../lang/isArray":87,"../lang/isObject":92,"./arrayCopy":18,"./arrayEach":19,"./baseAssign":26,"./baseForOwn":39,"./initCloneArray":70,"./initCloneByTag":71,"./initCloneObject":72}],29:[function(require,module,exports){function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],30:[function(require,module,exports){function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length)return result;var index=-1,indexOf=baseIndexOf,isCommon=!0,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;cache&&(indexOf=cacheIndexOf,isCommon=!1,values=cache);outer:for(;++index<length;){var value=array[index];if(isCommon&&value===value){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===value)continue outer;result.push(value)}else indexOf(values,value,0)<0&&result.push(value)}return result}var baseIndexOf=require("./baseIndexOf"),cacheIndexOf=require("./cacheIndexOf"),createCache=require("./createCache"),LARGE_ARRAY_SIZE=200;module.exports=baseDifference},{"./baseIndexOf":42,"./cacheIndexOf":55,"./createCache":60}],31:[function(require,module,exports){var baseForOwn=require("./baseForOwn"),createBaseEach=require("./createBaseEach"),baseEach=createBaseEach(baseForOwn);module.exports=baseEach},{"./baseForOwn":39,"./createBaseEach":58}],32:[function(require,module,exports){function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}var baseEach=require("./baseEach");module.exports=baseEvery},{"./baseEach":31}],33:[function(require,module,exports){function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}var baseEach=require("./baseEach");module.exports=baseFilter},{"./baseEach":31}],34:[function(require,module,exports){function baseFind(collection,predicate,eachFunc,retKey){var result;return eachFunc(collection,function(value,key,collection){return predicate(value,key,collection)?(result=retKey?key:value,!1):void 0}),result}module.exports=baseFind},{}],35:[function(require,module,exports){function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}module.exports=baseFindIndex},{}],36:[function(require,module,exports){function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);for(var index=-1,length=array.length;++index<length;){var value=array[index];isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))?isDeep?baseFlatten(value,isDeep,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var arrayPush=require("./arrayPush"),isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");module.exports=baseFlatten},{"../lang/isArguments":86,"../lang/isArray":87,"./arrayPush":23,"./isArrayLike":73,"./isObjectLike":78}],37:[function(require,module,exports){var createBaseFor=require("./createBaseFor"),baseFor=createBaseFor();module.exports=baseFor},{"./createBaseFor":59}],38:[function(require,module,exports){function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}var baseFor=require("./baseFor"),keysIn=require("../object/keysIn");module.exports=baseForIn},{"../object/keysIn":99,"./baseFor":37}],39:[function(require,module,exports){function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}var baseFor=require("./baseFor"),keys=require("../object/keys");module.exports=baseForOwn},{"../object/keys":98,"./baseFor":37}],40:[function(require,module,exports){function baseFunctions(object,props){for(var index=-1,length=props.length,resIndex=-1,result=[];++index<length;){var key=props[index];isFunction(object[key])&&(result[++resIndex]=key)}return result}var isFunction=require("../lang/isFunction");module.exports=baseFunctions},{"../lang/isFunction":89}],41:[function(require,module,exports){function baseGet(object,path,pathKey){if(null!=object){void 0!==pathKey&&pathKey in toObject(object)&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]];return index&&index==length?object:void 0}}var toObject=require("./toObject");module.exports=baseGet},{"./toObject":83}],42:[function(require,module,exports){function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}var indexOfNaN=require("./indexOfNaN");module.exports=baseIndexOf},{"./indexOfNaN":69}],43:[function(require,module,exports){function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}var baseIsEqualDeep=require("./baseIsEqualDeep"),isObject=require("../lang/isObject"),isObjectLike=require("./isObjectLike");module.exports=baseIsEqual},{"../lang/isObject":92,"./baseIsEqualDeep":44,"./isObjectLike":78}],44:[function(require,module,exports){function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}var equalArrays=require("./equalArrays"),equalByTag=require("./equalByTag"),equalObjects=require("./equalObjects"),isArray=require("../lang/isArray"),isTypedArray=require("../lang/isTypedArray"),argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString;module.exports=baseIsEqualDeep},{"../lang/isArray":87,"../lang/isTypedArray":94,"./equalArrays":63,"./equalByTag":64,"./equalObjects":65}],45:[function(require,module,exports){function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):void 0;if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}var baseIsEqual=require("./baseIsEqual"),toObject=require("./toObject");module.exports=baseIsMatch},{"./baseIsEqual":43,"./toObject":83}],46:[function(require,module,exports){function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}var baseEach=require("./baseEach"),isArrayLike=require("./isArrayLike");module.exports=baseMap},{"./baseEach":31,"./isArrayLike":73}],47:[function(require,module,exports){function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null==object?!1:object[key]===value&&(void 0!==value||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}var baseIsMatch=require("./baseIsMatch"),getMatchData=require("./getMatchData"),toObject=require("./toObject");module.exports=baseMatches},{"./baseIsMatch":45,"./getMatchData":67,"./toObject":83}],48:[function(require,module,exports){function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),(isArr||!isCommon)&&!(key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?void 0!==srcValue||key in object:baseIsEqual(srcValue,object[key],void 0,!0)}}var baseGet=require("./baseGet"),baseIsEqual=require("./baseIsEqual"),baseSlice=require("./baseSlice"),isArray=require("../lang/isArray"),isKey=require("./isKey"),isStrictComparable=require("./isStrictComparable"),last=require("../array/last"),toObject=require("./toObject"),toPath=require("./toPath");module.exports=baseMatchesProperty},{"../array/last":5,"../lang/isArray":87,"./baseGet":41,"./baseIsEqual":43,"./baseSlice":51,"./isKey":76,"./isStrictComparable":79,"./toObject":83,"./toPath":84}],49:[function(require,module,exports){function baseProperty(key){return function(object){return null==object?void 0:object[key]}}module.exports=baseProperty},{}],50:[function(require,module,exports){function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}var baseGet=require("./baseGet"),toPath=require("./toPath");module.exports=basePropertyDeep},{"./baseGet":41,"./toPath":84}],51:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=void 0===end||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}module.exports=baseSlice},{}],52:[function(require,module,exports){function baseToString(value){return null==value?"":value+""}module.exports=baseToString},{}],53:[function(require,module,exports){function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}var identity=require("../utility/identity");module.exports=bindCallback},{"../utility/identity":102}],54:[function(require,module,exports){(function(global){function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);return view.set(new Uint8Array(buffer)),result}var ArrayBuffer=global.ArrayBuffer,Uint8Array=global.Uint8Array;module.exports=bufferClone}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],55:[function(require,module,exports){function cacheIndexOf(cache,value){var data=cache.data,result="string"==typeof value||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}var isObject=require("../lang/isObject");module.exports=cacheIndexOf},{"../lang/isObject":92}],56:[function(require,module,exports){function cachePush(value){var data=this.data;"string"==typeof value||isObject(value)?data.set.add(value):data.hash[value]=!0}var isObject=require("../lang/isObject");module.exports=cachePush},{"../lang/isObject":92}],57:[function(require,module,exports){function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:void 0,guard=length>2?sources[2]:void 0,thisArg=length>1?sources[length-1]:void 0;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:void 0,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?void 0:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}var bindCallback=require("./bindCallback"),isIterateeCall=require("./isIterateeCall"),restParam=require("../function/restParam");module.exports=createAssigner},{"../function/restParam":16,"./bindCallback":53,"./isIterateeCall":75}],58:[function(require,module,exports){function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}var getLength=require("./getLength"),isLength=require("./isLength"),toObject=require("./toObject");module.exports=createBaseEach},{"./getLength":66,"./isLength":77,"./toObject":83}],59:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}var toObject=require("./toObject");module.exports=createBaseFor},{"./toObject":83}],60:[function(require,module,exports){(function(global){function createCache(values){return nativeCreate&&Set?new SetCache(values):null}var SetCache=require("./SetCache"),getNative=require("./getNative"),Set=getNative(global,"Set"),nativeCreate=getNative(Object,"create");module.exports=createCache}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":17,"./getNative":68}],61:[function(require,module,exports){function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){if(predicate=baseCallback(predicate,thisArg,3),isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:void 0}return baseFind(collection,predicate,eachFunc)}}var baseCallback=require("./baseCallback"),baseFind=require("./baseFind"),baseFindIndex=require("./baseFindIndex"),isArray=require("../lang/isArray");module.exports=createFind},{"../lang/isArray":87,"./baseCallback":27,"./baseFind":34,"./baseFindIndex":35}],62:[function(require,module,exports){function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&void 0===thisArg&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}var bindCallback=require("./bindCallback"),isArray=require("../lang/isArray");module.exports=createForEach},{"../lang/isArray":87,"./bindCallback":53}],63:[function(require,module,exports){function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):void 0;if(void 0!==result){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}var arraySome=require("./arraySome");module.exports=equalArrays},{"./arraySome":24}],64:[function(require,module,exports){function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",numberTag="[object Number]",regexpTag="[object RegExp]",stringTag="[object String]";module.exports=equalByTag},{}],65:[function(require,module,exports){function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):void 0;if(!(void 0===result?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}var keys=require("../object/keys"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=equalObjects},{"../object/keys":98}],66:[function(require,module,exports){var baseProperty=require("./baseProperty"),getLength=baseProperty("length");module.exports=getLength},{"./baseProperty":49}],67:[function(require,module,exports){function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}var isStrictComparable=require("./isStrictComparable"),pairs=require("../object/pairs");module.exports=getMatchData},{"../object/pairs":100,"./isStrictComparable":79}],68:[function(require,module,exports){function getNative(object,key){var value=null==object?void 0:object[key];return isNative(value)?value:void 0}var isNative=require("../lang/isNative");module.exports=getNative},{"../lang/isNative":90}],69:[function(require,module,exports){function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:++index<length;){var other=array[index];if(other!==other)return index}return-1}module.exports=indexOfNaN},{}],70:[function(require,module,exports){function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=initCloneArray},{}],71:[function(require,module,exports){function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);
case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}var bufferClone=require("./bufferClone"),boolTag="[object Boolean]",dateTag="[object Date]",numberTag="[object Number]",regexpTag="[object RegExp]",stringTag="[object String]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/;module.exports=initCloneByTag},{"./bufferClone":54}],72:[function(require,module,exports){function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor}module.exports=initCloneObject},{}],73:[function(require,module,exports){function isArrayLike(value){return null!=value&&isLength(getLength(value))}var getLength=require("./getLength"),isLength=require("./isLength");module.exports=isArrayLike},{"./getLength":66,"./isLength":77}],74:[function(require,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991;module.exports=isIndex},{}],75:[function(require,module,exports){function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}var isArrayLike=require("./isArrayLike"),isIndex=require("./isIndex"),isObject=require("../lang/isObject");module.exports=isIterateeCall},{"../lang/isObject":92,"./isArrayLike":73,"./isIndex":74}],76:[function(require,module,exports){function isKey(value,object){var type=typeof value;if("string"==type&&reIsPlainProp.test(value)||"number"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}var isArray=require("../lang/isArray"),toObject=require("./toObject"),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=isKey},{"../lang/isArray":87,"./toObject":83}],77:[function(require,module,exports){function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}var MAX_SAFE_INTEGER=9007199254740991;module.exports=isLength},{}],78:[function(require,module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}module.exports=isObjectLike},{}],79:[function(require,module,exports){function isStrictComparable(value){return value===value&&!isObject(value)}var isObject=require("../lang/isObject");module.exports=isStrictComparable},{"../lang/isObject":92}],80:[function(require,module,exports){function pickByArray(object,props){object=toObject(object);for(var index=-1,length=props.length,result={};++index<length;){var key=props[index];key in object&&(result[key]=object[key])}return result}var toObject=require("./toObject");module.exports=pickByArray},{"./toObject":83}],81:[function(require,module,exports){function pickByCallback(object,predicate){var result={};return baseForIn(object,function(value,key,object){predicate(value,key,object)&&(result[key]=value)}),result}var baseForIn=require("./baseForIn");module.exports=pickByCallback},{"./baseForIn":38}],82:[function(require,module,exports){function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("./isIndex"),isLength=require("./isLength"),keysIn=require("../object/keysIn"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=shimKeys},{"../lang/isArguments":86,"../lang/isArray":87,"../object/keysIn":99,"./isIndex":74,"./isLength":77}],83:[function(require,module,exports){function toObject(value){return isObject(value)?value:Object(value)}var isObject=require("../lang/isObject");module.exports=toObject},{"../lang/isObject":92}],84:[function(require,module,exports){function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}var baseToString=require("./baseToString"),isArray=require("../lang/isArray"),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g;module.exports=toPath},{"../lang/isArray":87,"./baseToString":52}],85:[function(require,module,exports){function clone(value,isDeep,customizer,thisArg){return isDeep&&"boolean"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:"function"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),"function"==typeof customizer?baseClone(value,isDeep,bindCallback(customizer,thisArg,3)):baseClone(value,isDeep)}var baseClone=require("../internal/baseClone"),bindCallback=require("../internal/bindCallback"),isIterateeCall=require("../internal/isIterateeCall");module.exports=clone},{"../internal/baseClone":28,"../internal/bindCallback":53,"../internal/isIterateeCall":75}],86:[function(require,module,exports){function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable;module.exports=isArguments},{"../internal/isArrayLike":73,"../internal/isObjectLike":78}],87:[function(require,module,exports){var getNative=require("../internal/getNative"),isLength=require("../internal/isLength"),isObjectLike=require("../internal/isObjectLike"),arrayTag="[object Array]",objectProto=Object.prototype,objToString=objectProto.toString,nativeIsArray=getNative(Array,"isArray"),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{"../internal/getNative":68,"../internal/isLength":77,"../internal/isObjectLike":78}],88:[function(require,module,exports){function isEmpty(value){return null==value?!0:isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))?!value.length:!keys(value).length}var isArguments=require("./isArguments"),isArray=require("./isArray"),isArrayLike=require("../internal/isArrayLike"),isFunction=require("./isFunction"),isObjectLike=require("../internal/isObjectLike"),isString=require("./isString"),keys=require("../object/keys");module.exports=isEmpty},{"../internal/isArrayLike":73,"../internal/isObjectLike":78,"../object/keys":98,"./isArguments":86,"./isArray":87,"./isFunction":89,"./isString":93}],89:[function(require,module,exports){function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}var isObject=require("./isObject"),funcTag="[object Function]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isFunction},{"./isObject":92}],90:[function(require,module,exports){function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value)}var isFunction=require("./isFunction"),isObjectLike=require("../internal/isObjectLike"),reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=isNative},{"../internal/isObjectLike":78,"./isFunction":89}],91:[function(require,module,exports){function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}var isObjectLike=require("../internal/isObjectLike"),numberTag="[object Number]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isNumber},{"../internal/isObjectLike":78}],92:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}module.exports=isObject},{}],93:[function(require,module,exports){function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}var isObjectLike=require("../internal/isObjectLike"),stringTag="[object String]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isString},{"../internal/isObjectLike":78}],94:[function(require,module,exports){function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}var isLength=require("../internal/isLength"),isObjectLike=require("../internal/isObjectLike"),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isTypedArray},{"../internal/isLength":77,"../internal/isObjectLike":78}],95:[function(require,module,exports){var assignWith=require("../internal/assignWith"),baseAssign=require("../internal/baseAssign"),createAssigner=require("../internal/createAssigner"),assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},{"../internal/assignWith":25,"../internal/baseAssign":26,"../internal/createAssigner":57}],96:[function(require,module,exports){module.exports=require("./assign")},{"./assign":95}],97:[function(require,module,exports){function functions(object){return baseFunctions(object,keysIn(object))}var baseFunctions=require("../internal/baseFunctions"),keysIn=require("./keysIn");module.exports=functions},{"../internal/baseFunctions":40,"./keysIn":99}],98:[function(require,module,exports){var getNative=require("../internal/getNative"),isArrayLike=require("../internal/isArrayLike"),isObject=require("../lang/isObject"),shimKeys=require("../internal/shimKeys"),nativeKeys=getNative(Object,"keys"),keys=nativeKeys?function(object){var Ctor=null==object?void 0:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||"function"!=typeof object&&isArrayLike(object)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;module.exports=keys},{"../internal/getNative":68,"../internal/isArrayLike":73,"../internal/shimKeys":82,"../lang/isObject":92}],99:[function(require,module,exports){function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto="function"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;++index<length;)result[index]=index+"";for(var key in object)skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("../internal/isIndex"),isLength=require("../internal/isLength"),isObject=require("../lang/isObject"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=keysIn},{"../internal/isIndex":74,"../internal/isLength":77,"../lang/isArguments":86,"../lang/isArray":87,"../lang/isObject":92}],100:[function(require,module,exports){function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}var keys=require("./keys"),toObject=require("../internal/toObject");module.exports=pairs},{"../internal/toObject":83,"./keys":98}],101:[function(require,module,exports){var baseFlatten=require("../internal/baseFlatten"),bindCallback=require("../internal/bindCallback"),pickByArray=require("../internal/pickByArray"),pickByCallback=require("../internal/pickByCallback"),restParam=require("../function/restParam"),pick=restParam(function(object,props){return null==object?{}:"function"==typeof props[0]?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});module.exports=pick},{"../function/restParam":16,"../internal/baseFlatten":36,"../internal/bindCallback":53,"../internal/pickByArray":80,"../internal/pickByCallback":81}],102:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],103:[function(require,module,exports){function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var baseProperty=require("../internal/baseProperty"),basePropertyDeep=require("../internal/basePropertyDeep"),isKey=require("../internal/isKey");module.exports=property},{"../internal/baseProperty":49,"../internal/basePropertyDeep":50,"../internal/isKey":76}],104:[function(require,module,exports){!function(){function nextTick(fn){global.setImmediate?setImmediate(fn):global.importScripts?setTimeout(fn):(queueId++,queue[queueId]=fn,global.postMessage(queueId,"*"))}function Deferred(resolver){"use strict";function thennable(ref,cb,ec,cn){if(2==state)return cn();if("object"!=typeof val&&"function"!=typeof val||"function"!=typeof ref)cn();else try{var cnt=0;ref.call(val,function(v){cnt++||(val=v,cb())},function(v){cnt++||(val=v,ec())})}catch(e){val=e,ec()}}function fire(){var ref;try{ref=val&&val.then}catch(e){return val=e,state=2,fire()}thennable(ref,function(){state=1,fire()},function(){state=2,fire()},function(){try{1==state&&"function"==typeof fn?val=fn(val):2==state&&"function"==typeof er&&(val=er(val),state=1)}catch(e){return val=e,finish()}val==self?(val=TypeError(),finish()):thennable(ref,function(){finish(3)},finish,function(){finish(1==state&&3)})})}if("function"!=typeof resolver&&void 0!=resolver)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var fn,er,self=this,state=0,val=0,next=[];self.promise=self,self.resolve=function(v){return fn=self.fn,er=self.er,state||(val=v,state=1,nextTick(fire)),self},self.reject=function(v){return fn=self.fn,er=self.er,state||(val=v,state=2,nextTick(fire)),self},self._d=1,self.then=function(_fn,_er){if(1!=this._d)throw TypeError();var d=new Deferred;return d.fn=_fn,d.er=_er,3==state?d.resolve(val):4==state?d.reject(val):next.push(d),d},self["catch"]=function(_er){return self.then(null,_er)};var finish=function(type){state=type||4,next.map(function(p){3==state&&p.resolve(val)||p.reject(val)})};try{"function"==typeof resolver&&resolver(self.resolve,self.reject)}catch(e){self.reject(e)}return self}global=this;var queueId=1,queue={},isRunningTask=!1;global.setImmediate||global.addEventListener("message",function(e){if(e.source==global)if(isRunningTask)nextTick(queue[e.data]);else{isRunningTask=!0;try{queue[e.data]()}catch(e){}delete queue[e.data],isRunningTask=!1}}),Deferred.resolve=function(value){if(1!=this._d)throw TypeError();return value instanceof Deferred?value:new Deferred(function(resolve){resolve(value)})},Deferred.reject=function(value){if(1!=this._d)throw TypeError();return new Deferred(function(resolve,reject){reject(value)})},Deferred.all=function(arr){function done(e,v){if(v)return d.resolve(v);if(e)return d.reject(e);var unresolved=arr.reduce(function(cnt,v){return v&&v.then?cnt+1:cnt},0);0==unresolved&&d.resolve(arr),arr.map(function(v,i){v&&v.then&&v.then(function(r){return arr[i]=r,done(),r},done)})}if(1!=this._d)throw TypeError();if(!(arr instanceof Array))return Deferred.reject(TypeError());var d=new Deferred;return done(),d},Deferred.race=function(arr){function done(e,v){if(v)return d.resolve(v);if(e)return d.reject(e);var unresolved=arr.reduce(function(cnt,v){return v&&v.then?cnt+1:cnt},0);0==unresolved&&d.resolve(arr),arr.map(function(v,i){v&&v.then&&v.then(function(r){done(null,r)},done)})}if(1!=this._d)throw TypeError();if(!(arr instanceof Array))return Deferred.reject(TypeError());if(0==arr.length)return new Deferred;var d=new Deferred;return done(),d},Deferred._d=1,"undefined"!=typeof module?module.exports=Deferred:global.Promise=global.Promise||Deferred}()},{}],105:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;len>i;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],106:[function(require,module,exports){"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],107:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":105,"./encode":106}],108:[function(require,module,exports){!function(self){"use strict";function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){return body.bodyUsed?Promise.reject(new TypeError("Already read")):void(body.bodyUsed=!0)}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;return reader.readAsArrayBuffer(blob),fileReaderReady(reader)}function readBlobAsText(blob){var reader=new FileReader;return reader.readAsText(blob),fileReaderReady(reader)}function Body(){return this.bodyUsed=!1,this._initBody=function(body){if(this._bodyInit=body,"string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(body){if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},support.blob?(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)},this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=input;if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=normalizeMethod(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function headers(xhr){var head=new Headers,pairs=xhr.getAllResponseHeaders().trim().split("\n");return pairs.forEach(function(header){var split=header.trim().split(":"),key=split.shift().trim(),value=split.join(":").trim();head.append(key,value)}),head}function Response(bodyInit,options){options||(options={}),this.type="default",this.status=options.status,this.ok=this.status>=200&&this.status<300,this.statusText=options.statusText,this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}if(!self.fetch){Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var list=this.map[name];list||(list=[],this.map[name]=list),list.push(value)},Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null},Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]},Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self},methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this)},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(-1===redirectStatuses.indexOf(status))throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})},self.Headers=Headers,self.Request=Request,self.Response=Response,self.fetch=function(input,init){return new Promise(function(resolve,reject){function responseURL(){return"responseURL"in xhr?xhr.responseURL:/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())?xhr.getResponseHeader("X-Request-URL"):void 0}var request;request=Request.prototype.isPrototypeOf(input)&&!init?input:new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var status=1223===xhr.status?204:xhr.status;if(100>status||status>599)return void reject(new TypeError("Network request failed"));var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()},body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})},self.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}]},{},[1])(1)});