(function(window,undefined){(function(window,undefined){var AFTER,BEFORE,COMMON_EVENTS,EventEmitter,FIRE,FormData,NativeFormData,NativeXMLHttp,OFF,ON,READY_STATE,UPLOAD_EVENTS,XHookFormData,XHookHttpRequest,XMLHTTP,convertHeaders,depricatedProp,document,fakeEvent,mergeObjects,msie,proxyEvents,slice,xhook,_base,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};document=window.document,BEFORE="before",AFTER="after",READY_STATE="readyState",ON="addEventListener",OFF="removeEventListener",FIRE="dispatchEvent",XMLHTTP="XMLHttpRequest",FormData="FormData",UPLOAD_EVENTS=["load","loadend","loadstart"],COMMON_EVENTS=["progress","abort","error","timeout"],msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(msie)&&(msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),(_base=Array.prototype).indexOf||(_base.indexOf=function(item){var i,x,_i,_len;for(i=_i=0,_len=this.length;_len>_i;i=++_i)if(x=this[i],x===item)return i;return-1}),slice=function(o,n){return Array.prototype.slice.call(o,n)},depricatedProp=function(p){return"returnValue"===p||"totalSize"===p||"position"===p},mergeObjects=function(src,dst){var k,v;for(k in src)if(v=src[k],!depricatedProp(k))try{dst[k]=src[k]}catch(_error){}return dst},proxyEvents=function(events,src,dst){var event,p,_i,_len;for(p=function(event){return function(e){var clone,k,val;clone={};for(k in e)depricatedProp(k)||(val=e[k],clone[k]=val===src?dst:val);return dst[FIRE](event,clone)}},_i=0,_len=events.length;_len>_i;_i++)event=events[_i],dst._has(event)&&(src["on"+event]=p(event))},fakeEvent=function(type){var msieEventObject;if(null!=document.createEventObject)return msieEventObject=document.createEventObject(),msieEventObject.type=type,msieEventObject;try{return new Event(type)}catch(_error){return{type:type}}},EventEmitter=function(nodeStyle){var emitter,events,listeners;return events={},listeners=function(event){return events[event]||[]},emitter={},emitter[ON]=function(event,callback,i){events[event]=listeners(event),events[event].indexOf(callback)>=0||(i=i===undefined?events[event].length:i,events[event].splice(i,0,callback))},emitter[OFF]=function(event,callback){var i;return event===undefined?void(events={}):(callback===undefined&&(events[event]=[]),i=listeners(event).indexOf(callback),void(-1!==i&&listeners(event).splice(i,1)))},emitter[FIRE]=function(){var args,event,i,legacylistener,listener,_i,_len,_ref;for(args=slice(arguments),event=args.shift(),nodeStyle||(args[0]=mergeObjects(args[0],fakeEvent(event))),legacylistener=emitter["on"+event],legacylistener&&legacylistener.apply(undefined,args),_ref=listeners(event).concat(listeners("*")),i=_i=0,_len=_ref.length;_len>_i;i=++_i)listener=_ref[i],listener.apply(undefined,args)},emitter._has=function(event){return!(!events[event]&&!emitter["on"+event])},nodeStyle&&(emitter.listeners=function(event){return slice(listeners(event))},emitter.on=emitter[ON],emitter.off=emitter[OFF],emitter.fire=emitter[FIRE],emitter.once=function(e,fn){var fire;return fire=function(){return emitter.off(e,fire),fn.apply(null,arguments)},emitter.on(e,fire)},emitter.destroy=function(){return events={}}),emitter},xhook=EventEmitter(!0),xhook.EventEmitter=EventEmitter,xhook[BEFORE]=function(handler,i){if(handler.length<1||handler.length>2)throw"invalid hook";return xhook[ON](BEFORE,handler,i)},xhook[AFTER]=function(handler,i){if(handler.length<2||handler.length>3)throw"invalid hook";return xhook[ON](AFTER,handler,i)},xhook.enable=function(){window[XMLHTTP]=XHookHttpRequest,NativeFormData&&(window[FormData]=XHookFormData)},xhook.disable=function(){window[XMLHTTP]=xhook[XMLHTTP],window[FormData]=NativeFormData},convertHeaders=xhook.headers=function(h,dest){var header,headers,k,name,v,value,_i,_len,_ref;switch(null==dest&&(dest={}),typeof h){case"object":headers=[];for(k in h)v=h[k],name=k.toLowerCase(),headers.push(""+name+":	"+v);return headers.join("\n");case"string":for(headers=h.split("\n"),_i=0,_len=headers.length;_len>_i;_i++)header=headers[_i],/([^:]+):\s*(.+)/.test(header)&&(name=null!=(_ref=RegExp.$1)?_ref.toLowerCase():void 0,value=RegExp.$2,null==dest[name]&&(dest[name]=value));return dest}},NativeFormData=window[FormData],XHookFormData=function(form){var entries;this.fd=form?new NativeFormData(form):new NativeFormData,this.form=form,entries=[],Object.defineProperty(this,"entries",{get:function(){var fentries;return fentries=form?slice(form.querySelectorAll("input,select")).filter(function(e){var _ref;return"checkbox"!==(_ref=e.type)&&"radio"!==_ref||e.checked}).map(function(e){return[e.name,"file"===e.type?e.files:e.value]}):[],fentries.concat(entries)}}),this.append=function(_this){return function(){var args;return args=slice(arguments),entries.push(args),_this.fd.append.apply(_this.fd,args)}}(this)},NativeFormData&&(xhook[FormData]=NativeFormData,window[FormData]=XHookFormData),NativeXMLHttp=window[XMLHTTP],xhook[XMLHTTP]=NativeXMLHttp,XHookHttpRequest=window[XMLHTTP]=function(){var ABORTED,currentState,emitFinal,emitReadyState,facade,hasError,hasErrorHandler,readBody,readHead,request,response,setReadyState,status,transiting,writeBody,writeHead,xhr;return ABORTED=-1,xhr=new xhook[XMLHTTP],request={},status=null,hasError=void 0,transiting=void 0,response=void 0,readHead=function(){var key,name,val,_ref;if(response.status=status||xhr.status,status===ABORTED&&10>msie||(response.statusText=xhr.statusText),status!==ABORTED){_ref=convertHeaders(xhr.getAllResponseHeaders());for(key in _ref)val=_ref[key],response.headers[key]||(name=key.toLowerCase(),response.headers[name]=val)}},readBody=function(){xhr.responseType&&"text"!==xhr.responseType?"document"===xhr.responseType?(response.xml=xhr.responseXML,response.data=xhr.responseXML):response.data=xhr.response:(response.text=xhr.responseText,response.data=xhr.responseText),"responseURL"in xhr&&(response.finalUrl=xhr.responseURL)},writeHead=function(){facade.status=response.status,facade.statusText=response.statusText},writeBody=function(){"text"in response&&(facade.responseText=response.text),"xml"in response&&(facade.responseXML=response.xml),"data"in response&&(facade.response=response.data),"finalUrl"in response&&(facade.responseURL=response.finalUrl)},emitReadyState=function(n){for(;n>currentState&&4>currentState;)facade[READY_STATE]=++currentState,1===currentState&&facade[FIRE]("loadstart",{}),2===currentState&&writeHead(),4===currentState&&(writeHead(),writeBody()),facade[FIRE]("readystatechange",{}),4===currentState&&setTimeout(emitFinal,0)},emitFinal=function(){hasError||facade[FIRE]("load",{}),facade[FIRE]("loadend",{}),hasError&&(facade[READY_STATE]=0)},currentState=0,setReadyState=function(n){var hooks,process;return 4!==n?void emitReadyState(n):(hooks=xhook.listeners(AFTER),process=function(){var hook;return hooks.length?(hook=hooks.shift(),2===hook.length?(hook(request,response),process()):3===hook.length&&request.async?hook(request,response,process):process()):emitReadyState(4)},void process())},facade=request.xhr=EventEmitter(),xhr.onreadystatechange=function(event){try{2===xhr[READY_STATE]&&readHead()}catch(_error){}4===xhr[READY_STATE]&&(transiting=!1,readHead(),readBody()),setReadyState(xhr[READY_STATE])},hasErrorHandler=function(){hasError=!0},facade[ON]("error",hasErrorHandler),facade[ON]("timeout",hasErrorHandler),facade[ON]("abort",hasErrorHandler),facade[ON]("progress",function(){3>currentState?setReadyState(3):facade[FIRE]("readystatechange",{})}),("withCredentials"in xhr||xhook.addWithCredentials)&&(facade.withCredentials=!1),facade.status=0,facade.open=function(method,url,async,user,pass){currentState=0,hasError=!1,transiting=!1,request.headers={},request.headerNames={},request.status=0,response={},response.headers={},request.method=method,request.url=url,request.async=async!==!1,request.user=user,request.pass=pass,setReadyState(1)},facade.send=function(body){var hooks,k,modk,process,send,_i,_len,_ref;for(_ref=["type","timeout","withCredentials"],_i=0,_len=_ref.length;_len>_i;_i++)k=_ref[_i],modk="type"===k?"responseType":k,modk in facade&&(request[k]=facade[modk]);request.body=body,send=function(){var header,value,_j,_len1,_ref1,_ref2;for(proxyEvents(COMMON_EVENTS,xhr,facade),facade.upload&&proxyEvents(COMMON_EVENTS.concat(UPLOAD_EVENTS),xhr.upload,facade.upload),transiting=!0,xhr.open(request.method,request.url,request.async,request.user,request.pass),_ref1=["type","timeout","withCredentials"],_j=0,_len1=_ref1.length;_len1>_j;_j++)k=_ref1[_j],modk="type"===k?"responseType":k,k in request&&(xhr[modk]=request[k]);_ref2=request.headers;for(header in _ref2)value=_ref2[header],xhr.setRequestHeader(header,value);request.body instanceof XHookFormData&&(request.body=request.body.fd),xhr.send(request.body)},hooks=xhook.listeners(BEFORE),(process=function(){var done,hook;return hooks.length?(done=function(userResponse){return"object"!=typeof userResponse||"number"!=typeof userResponse.status&&"number"!=typeof response.status?void process():(mergeObjects(userResponse,response),__indexOf.call(userResponse,"data")<0&&(userResponse.data=userResponse.response||userResponse.text),void setReadyState(4))},done.head=function(userResponse){return mergeObjects(userResponse,response),setReadyState(2)},done.progress=function(userResponse){return mergeObjects(userResponse,response),setReadyState(3)},hook=hooks.shift(),1===hook.length?done(hook(request)):2===hook.length&&request.async?hook(request,done):done()):send()})()},facade.abort=function(){status=ABORTED,transiting?xhr.abort():facade[FIRE]("abort",{})},facade.setRequestHeader=function(header,value){var lName,name;lName=null!=header?header.toLowerCase():void 0,name=request.headerNames[lName]=request.headerNames[lName]||header,request.headers[name]&&(value=request.headers[name]+", "+value),request.headers[name]=value},facade.getResponseHeader=function(header){var name;return name=null!=header?header.toLowerCase():void 0,response.headers[name]},facade.getAllResponseHeaders=function(){return convertHeaders(response.headers)},xhr.overrideMimeType&&(facade.overrideMimeType=function(){return xhr.overrideMimeType.apply(xhr,arguments)}),xhr.upload&&(facade.upload=request.upload=EventEmitter()),facade},"function"==typeof this.define&&this.define.amd?define("xhook",[],function(){return xhook}):(this.exports||this).xhook=xhook}).call(this,window);var CHECK_INTERVAL,COMPAT_VERSION,XD_CHECK,console,cookies,createSocket,currentOrigin,document,emitter,feature,frames,getFrame,guid,handleSocket,initMaster,initSlave,initdMaster,initdSlave,instOf,jsonEncode,location,log,logger,masters,onMessage,parseUrl,setupEmitter,slaves,slice,sockets,startPostMessage,strip,toRegExp,warn,xdomain,xhook,_i,_len,_ref;initdMaster=!1,slaves=function(s){var origin,path;initdMaster||initMaster();for(origin in s)path=s[origin],log("adding slave: "+origin),slaves[origin]=path},frames={},getFrame=function(origin,proxyPath){var frame;return frames[origin]?frames[origin]:(frame=document.createElement("iframe"),frame.id=frame.name=guid(),log("creating iframe "+frame.id),frame.src=""+origin+proxyPath,frame.setAttribute("style","display:none;"),document.body.appendChild(frame),frames[origin]=frame.contentWindow)},initMaster=function(){var convertFormData,convertToArrayBuffer,handleRequest;return initdMaster=!0,convertToArrayBuffer=function(args,done){var isBlob,isFile,name,obj,reader;return name=args[0],obj=args[1],isBlob=instOf(obj,"Blob"),isFile=instOf(obj,"File"),isBlob||isFile?(reader=new FileReader,reader.onload=function(){return args[1]=null,isFile&&(args[2]=obj.name),done(["XD_BLOB",args,this.result,obj.type])},reader.readAsArrayBuffer(obj),1):0},convertFormData=function(entries,send){var c;entries.forEach(function(args,i){var file,name,value,_i,_len;if(name=args[0],value=args[1],instOf(value,"FileList"))for(entries.splice(i,1),_i=0,_len=value.length;_len>_i;_i++)file=value[_i],entries.splice(i,0,[name,file])}),c=0,entries.forEach(function(args,i){c+=convertToArrayBuffer(args,function(newargs){entries[i]=newargs,0===--c&&send()})}),0===c&&send()},handleRequest=function(request,socket){var entries,obj,send;return socket.on("xhr-event",function(){return request.xhr.dispatchEvent.apply(null,arguments)}),socket.on("xhr-upload-event",function(){return request.xhr.upload.dispatchEvent.apply(null,arguments)}),obj=strip(request),obj.headers=request.headers,request.withCredentials&&(cookies.master&&(obj.headers[cookies.master]=document.cookie),obj.slaveCookie=cookies.slave),send=function(){return socket.emit("request",obj)},request.body&&(obj.body=request.body,instOf(obj.body,"FormData"))?(entries=obj.body.entries,obj.body=["XD_FD",entries],void convertFormData(entries,send)):void send()},"addWithCredentials"in xhook||(xhook.addWithCredentials=!0),xhook.before(function(request,callback){var frame,p,socket;return p=parseUrl(request.url),p&&p.origin!==currentOrigin?slaves[p.origin]?(log("proxying request to slave: '"+p.origin+"'"),request.async===!1?(warn("sync not supported"),callback()):(frame=getFrame(p.origin,slaves[p.origin]),socket=createSocket(guid(),frame),socket.on("response",function(resp){return callback(resp),socket.close()}),request.xhr.addEventListener("abort",function(){return socket.emit("abort")}),void(socket.ready?handleRequest(request,socket):socket.once("ready",function(){return handleRequest(request,socket)})))):(p&&log("no slave matching: '"+p.origin+"'"),callback()):callback()})},initdSlave=!1,masters=function(m){var origin,path;initdSlave||initSlave();for(origin in m)path=m[origin],log("adding master: "+origin),masters[origin]=path},handleSocket=null,initSlave=function(){return initdSlave=!0,log("handling incoming sockets..."),handleSocket=function(origin,socket){var master,masterRegex,pathRegex,regex;"null"===origin&&(origin="*"),pathRegex=null;for(master in masters){regex=masters[master];try{if(masterRegex=toRegExp(master),masterRegex.test(origin)){pathRegex=toRegExp(regex);break}}catch(_error){}}return pathRegex?(socket.once("request",function(req){var args,blob,entries,fd,k,p,v,xhr,_i,_len,_ref;if(log("request: "+req.method+" "+req.url),p=parseUrl(req.url),!p||!pathRegex.test(p.path))return warn("blocked request to path: '"+p.path+"' by regex: "+pathRegex),void socket.close();xhr=new XMLHttpRequest,xhr.open(req.method,req.url),xhr.addEventListener("*",function(e){return socket.emit("xhr-event",e.type,strip(e))}),xhr.upload&&xhr.upload.addEventListener("*",function(e){return socket.emit("xhr-upload-event",e.type,strip(e))}),socket.once("abort",function(){return xhr.abort()}),xhr.onreadystatechange=function(){var resp;if(4===xhr.readyState){resp={status:xhr.status,statusText:xhr.statusText,data:xhr.response,headers:xhook.headers(xhr.getAllResponseHeaders())};try{resp.text=xhr.responseText}catch(_error){}return socket.emit("response",resp)}},req.withCredentials&&(xhr.withCredentials=!0,req.slaveCookie&&(req.headers[req.slaveCookie]=document.cookie)),req.timeout&&(xhr.timeout=req.timeout),req.type&&(xhr.responseType=req.type),_ref=req.headers;for(k in _ref)v=_ref[k],xhr.setRequestHeader(k,v);if(req.body instanceof Array&&"XD_FD"===req.body[0]){for(fd=new xhook.FormData,entries=req.body[1],_i=0,_len=entries.length;_len>_i;_i++)args=entries[_i],"XD_BLOB"===args[0]&&4===args.length&&(blob=new Blob([args[2]],{type:args[3]}),args=args[1],args[1]=blob),fd.append.apply(fd,args);req.body=fd}xhr.send(req.body||null)}),void log("slave listening for requests on socket: "+socket.id)):void warn("blocked request from: '"+origin+"'")},window===window.parent?warn("slaves must be in an iframe"):window.parent.postMessage("XDPING_"+COMPAT_VERSION,"*")},XD_CHECK="XD_CHECK",sockets={},jsonEncode=!0,createSocket=function(id,frame){var check,checks,emit,pendingEmits,ready,sock;return ready=!1,sock=sockets[id]=xhook.EventEmitter(!0),sock.id=id,sock.once("close",function(){return sock.destroy(),sock.close()}),pendingEmits=[],sock.emit=function(){var args,extra;args=slice(arguments),extra="string"==typeof args[1]?" -> "+args[1]:"",log("send socket: "+id+": "+args[0]+extra),args.unshift(id),ready?emit(args):pendingEmits.push(args)},emit=function(args){jsonEncode&&(args=JSON.stringify(args)),frame.postMessage(args,"*")},sock.close=function(){sock.emit("close"),log("close socket: "+id),sockets[id]=null},sock.once(XD_CHECK,function(obj){for(jsonEncode="string"==typeof obj,ready=sock.ready=!0,sock.emit("ready"),log("ready socket: "+id+" (emit #"+pendingEmits.length+" pending)");pendingEmits.length;)emit(pendingEmits.shift())}),checks=0,check=function(_this){return function(){frame.postMessage([id,XD_CHECK,{}],"*"),ready||(checks++>=xdomain.timeout/CHECK_INTERVAL?(warn("Timeout waiting on iframe socket"),emitter.fire("timeout"),sock.fire("abort")):setTimeout(check,CHECK_INTERVAL))}}(this),setTimeout(check),log("new socket: "+id),sock},onMessage=function(fn){return document.addEventListener?window.addEventListener("message",fn):window.attachEvent("onmessage",fn)},startPostMessage=function(){return onMessage(function(e){var d,extra,id,sock;if(d=e.data,"string"==typeof d){if(/^XDPING(_(V\d+))?$/.test(d)&&RegExp.$2!==COMPAT_VERSION)return warn("your master is not compatible with your slave, check your xdomain.js version");if(/^xdomain-/.test(d))d=d.split(",");else if(jsonEncode)try{d=JSON.parse(d)}catch(_error){return}}if(d instanceof Array&&(id=d.shift(),/^xdomain-/.test(id)&&(sock=sockets[id],null!==sock))){if(sock===undefined){if(!handleSocket)return;sock=createSocket(id,e.source),handleSocket(e.origin,sock)}extra="string"==typeof d[1]?" -> "+d[1]:"",log("receive socket: "+id+": "+d[0]+extra),sock.fire.apply(sock,d)}})},xhook=(this.exports||this).xhook,xdomain=function(o){o&&(o.masters&&masters(o.masters),o.slaves&&slaves(o.slaves))},xdomain.masters=masters,xdomain.slaves=slaves,xdomain.debug=!1,xdomain.timeout=15e3,CHECK_INTERVAL=100,cookies=xdomain.cookies={master:"Master-Cookie",slave:"Slave-Cookie"},document=window.document,location=window.location,currentOrigin=xdomain.origin=location.protocol+"//"+location.host,guid=function(){return"xdomain-"+Math.round(Math.random()*Math.pow(2,32)).toString(16)},slice=function(o,n){return Array.prototype.slice.call(o,n)},console=window.console||{},emitter=null,setupEmitter=function(){emitter=xhook.EventEmitter(!0),xdomain.on=emitter.on,xdomain.off=emitter.off},xhook&&setupEmitter(),logger=function(type){return function(str){str="xdomain ("+currentOrigin+"): "+str,emitter.fire(type,str),("log"!==type||xdomain.debug)&&(type in xdomain?xdomain[type](str):type in console?console[type](str):"warn"===type&&alert(str))}},log=logger("log"),warn=logger("warn"),_ref=["postMessage","JSON"];for(_i=0,_len=_ref.length;_len>_i;_i++)if(feature=_ref[_i],!window[feature])return void warn("requires '"+feature+"' and this browser does not support it");instOf=function(obj,global){return global in window?obj instanceof window[global]:!1},COMPAT_VERSION="V1",parseUrl=xdomain.parseUrl=function(url){return/^((https?:)?\/\/[^\/\?]+)(\/.*)?/.test(url)?{origin:(RegExp.$2?"":location.protocol)+RegExp.$1,path:RegExp.$3}:(log("failed to parse absolute url: "+url),null)},toRegExp=function(obj){var str;return obj instanceof RegExp?obj:(str=obj.toString().replace(/\W/g,function(str){return"\\"+str}).replace(/\\\*/g,".*"),new RegExp("^"+str+"$"))},strip=function(src){var dst,k,v,_ref1;dst={};for(k in src)"returnValue"!==k&&(v=src[k],"function"!=(_ref1=typeof v)&&"object"!==_ref1&&(dst[k]=v));return dst},function(){var attrs,fn,k,prefix,script,_j,_k,_len1,_len2,_ref1,_ref2;for(attrs={debug:function(value){return"string"==typeof value?xdomain.debug="false"!==value:void 0},slave:function(value){var p,s;if(value&&(p=parseUrl(value)))return s={},s[p.origin]=p.path,slaves(s)},master:function(value){var m,p;if(value&&(p="*"===value?{origin:"*",path:"*"}:parseUrl(value)))return m={},m[p.origin]=p.path.replace(/^\//,"")?p.path:"*",masters(m)}},_ref1=document.getElementsByTagName("script"),_j=0,_len1=_ref1.length;_len1>_j;_j++)if(script=_ref1[_j],/xdomain/.test(script.src))for(_ref2=["","data-"],_k=0,_len2=_ref2.length;_len2>_k;_k++){prefix=_ref2[_k];for(k in attrs)(fn=attrs[k])(script.getAttribute(prefix+k))}}(),startPostMessage(),"function"==typeof this.define&&this.define.amd?define("xdomain",["xhook"],function(xh){return xhook=xh,setupEmitter(),xdomain}):(this.exports||this).xdomain=xdomain}).call(this,window),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.Papi=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function hasXDomain(){return"undefined"!=typeof window&&null!=window.xdomain}exports.__esModule=!0;var _superagent=require("superagent"),_superagent2=_interopRequireDefault(_superagent),_resourceSchema=require("./resource-schema"),_resourceSchema2=_interopRequireDefault(_resourceSchema),Papi=function(_ResourceSchema){function Papi(){var _this=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(_classCallCheck(this,Papi),_ResourceSchema.apply(this,arguments),this.options=options,this.options.host=options.host||"https://api.pressly.com",hasXDomain()){var slaves={};slaves[this.options.host]="/proxy.html",window.xdomain.slaves(slaves)}this.requestMiddlewares=[],this.responseMiddlewares=[],this.auth={session:null,get:function(){return _this.request("get","/session").then(function(res){return _this.auth.set(res.body)})},set:function(session){if(!session.jwt)throw new Error("Papi:Auth: Invalid session response - missing jwt");return _this.auth.session=session,_this.auth.session},isLoggedIn:function(){return!!_this.auth.session&&!_this.auth.isExpired()},isExpired:function(){return!1},login:function(email,password){return _this.request("post","/auth/login",{data:{email:email,password:password}}).then(function(res){return _this.auth.set(res.body)})},requestPasswordReset:function(email){return _this.request("post","/auth/password_reset/send",{data:{email:email}})},logout:function(){return _this.request("delete","/session").then(function(res){return _this.auth.session=null,res})}}}return _inherits(Papi,_ResourceSchema),Papi.prototype.request=function(method,path){var _this2=this,options=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return new Promise(function(resolve,reject){var url=/^(https?:)?\/\//.test(path)?path:_this2.options.host+path;"delete"==method&&(method="del");var req=_superagent2["default"][method](url),res={};req.set("Content-Type","application/json"),(options.timeout||_this2.options.timeout)&&req.timeout(options.timeout||_this2.options.timeout),"function"!=typeof req.withCredentials||hasXDomain()||req.withCredentials(),_this2.auth.session&&_this2.auth.session.jwt&&req.set("Authorization","Bearer "+_this2.auth.session.jwt),req.set("Accept","application/vnd.pressly.v0.12+json"),options.query&&req.query(options.query),options.data&&("get"==method?req.query(options.data):req.send(options.data));var beginRequest=function(){if(_this2.requestMiddlewares.length){var offset=0,next=function next(){var layer=_this2.requestMiddlewares[++offset]||endRequest;return req.next=next,layer(req,res,next,resolve,reject)};_this2.requestMiddlewares[0](req,res,next,resolve,reject)}else endRequest()},endRequest=function(){req.end(function(err,completedRes){return err?reject(err):(res=completedRes,void beginResponse())})},beginResponse=function(){if(_this2.responseMiddlewares.length){var offset=0,next=function next(){var layer=_this2.responseMiddlewares[++offset]||endResponse;return req.next=next,layer(req,res,next,resolve,reject)};_this2.responseMiddlewares[0](req,res,next,resolve,reject)}else endResponse()},endResponse=function(){resolve(res)};beginRequest()})},Papi.prototype.before=function(middleware){this.requestMiddlewares.push(middleware)},Papi.prototype.after=function(middleware){this.responseMiddlewares.push(middleware)},Papi}(_resourceSchema2["default"]);exports["default"]=Papi,void 0==Papi.defineSchema&&(Papi.defineSchema=_resourceSchema2["default"].defineSchema),Papi.defineSchema().resource("accounts").open().get("available",{on:"resource"}).post("become",{on:"member"}).resource("users").resource("hubs",{link:"hubs"}).close().resource("organizations").open().resource("users").resource("hubs").resource("invites").close().resource("posts",{routeSegment:"/stream/posts/:id"}).resource("hubs").open().get("search",{on:"resource"}).post("upgrade",{on:"member"}).post("accept_invite",{on:"member"}).post("reject_invite",{on:"member"}).resource("apps").open().get("current",{on:"resource",path:"/current"}).get("build",{on:"member",path:"/build_app"}).get("status",{on:"member"}).resource("styles").close().resource("addons").open().resource("configs").close().resource("analytics").open().get("summary",{on:"resource"}).get("visitors",{on:"resource"}).get("pageviews",{on:"resource"}).get("duration",{on:"resource"}).close().resource("feeds").open().resource("assets",{modelName:"FeedAsset"}).close().resource("invites").open().post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).post("accept",{on:"member",routeSegment:"/invites/:hash"}).post("reject",{on:"member",routeSegment:"/invites/:hash"}).close().resource("recommendations").resource("users").open().post("grant_access",{on:"resource"})["delete"]("revoke_access",{on:"member"}).close().resource("collections").open().put("reorder",{on:"resource"}).close().resource("tags").resource("assets",{routeSegment:"/stream/:id"}).open().put("feature",{on:"member"}).put("unfeature",{on:"member"}).put("hide",{on:"member"}).put("unhide",{on:"member"}).put("lock",{on:"member"}).put("unlock",{on:"member"}).resource("likes").resource("comments").close().resource("drafts").open().put("publish",{on:"member"}).close().close().resource("invites").open().get("incoming",{on:"resource"}).get("outgoing",{on:"resource"}).post("bulk_invite",{on:"resource"}).post("resend",{on:"member"}).post("accept",{on:"member",key:"hash"}).post("reject",{on:"member",key:"hash"}).close().resource("code_revisions").open().get("fetch_repo",{on:"member"}).resource("hubs",{link:"hubs"}).close().resource("signup").open().get("account_uid_available",{on:"member"}).get("account_email_available",{on:"member"}).close().resource("users").open().get("roles",{on:"resource"}).resource("hubs").resource("organizations").close().resource("discover").open().resource("users",{link:"users"}).resource("organizations",{link:"organizations"}).resource("hubs",{link:"hubs"}).resource("posts").close().resource("stream").open().resource("following").close(),module.exports=exports["default"]},{"./resource-schema":21,superagent:125}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var extend=require("lodash/object/extend"),keys=require("lodash/object/keys"),functions=require("lodash/object/functions"),pick=require("lodash/object/pick"),filter=require("lodash/collection/filter"),difference=require("lodash/array/difference"),Model=function(){function Model(data){arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,Model),extend(this,data),this.$newRecord=!0}return Model.prototype.$delete=function(params){return this.$resource().request({method:"delete",query:params})},Model.prototype.$save=function(params){var _this=this,method=this.$newRecord?"post":"put";return this.$resource().request({method:method,data:this,query:params}).then(function(res){return _this.$newRecord=!1,_this.$resource().sync(res),extend(_this,res)})},Model.prototype.$attributes=function(){return filter(difference(keys(this),functions(this)),function(x){return"$"!=x[0]})},Model.prototype.$data=function(){return pick(this,this.$attributes())},Model}();exports["default"]=Model,module.exports=exports["default"]},{"lodash/array/difference":23,"lodash/collection/filter":29,"lodash/object/extend":116,"lodash/object/functions":117,"lodash/object/keys":118,"lodash/object/pick":121}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Account=function(_Model){function Account(){_classCallCheck(this,Account),_Model.apply(this,arguments)}return _inherits(Account,_Model),Account}(_model2["default"]);exports["default"]=Account,module.exports=exports["default"]},{"../model":2}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),App=function(_Model){function App(){_classCallCheck(this,App),_Model.apply(this,arguments)}return _inherits(App,_Model),App}(_model2["default"]);exports["default"]=App,module.exports=exports["default"]},{"../model":2}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,
writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),all=require("lodash/collection/all"),pick=require("lodash/object/pick"),isEmpty=require("lodash/lang/isEmpty"),DISPLAY_STATES={VISIBLE:1,FEATURED:2,HIGHLIGHTED:4,LOCKED:8},Asset=function(_Model){function Asset(){_classCallCheck(this,Asset),_Model.apply(this,arguments)}return _inherits(Asset,_Model),Asset.prototype.isVisible=function(){return(this.display_state&DISPLAY_STATES.VISIBLE)===DISPLAY_STATES.VISIBLE},Asset.prototype.isHidden=function(){return(this.display_state&DISPLAY_STATES.VISIBLE)!==DISPLAY_STATES.VISIBLE},Asset.prototype.isFeatured=function(){return(this.display_state&DISPLAY_STATES.FEATURED)===DISPLAY_STATES.FEATURED},Asset.prototype.isHighlighted=function(){return(this.display_state&DISPLAY_STATES.HIGHLIGHTED)===DISPLAY_STATES.HIGHLIGHTED},Asset.prototype.isLocked=function(){return(this.display_state&DISPLAY_STATES.LOCKED)===DISPLAY_STATES.LOCKED},Asset.prototype.isOriginal=function(){return all(pick(this.source,"network","uid","url"),isEmpty)},Asset}(_model2["default"]);exports["default"]=Asset,module.exports=exports["default"]},{"../model":2,"lodash/collection/all":25,"lodash/lang/isEmpty":108,"lodash/object/pick":121}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),CodeRevision=function(_Model){function CodeRevision(){_classCallCheck(this,CodeRevision),_Model.apply(this,arguments)}return _inherits(CodeRevision,_Model),CodeRevision}(_model2["default"]);exports["default"]=CodeRevision,module.exports=exports["default"]},{"../model":2}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Collection=function(_Model){function Collection(){_classCallCheck(this,Collection),_Model.apply(this,arguments)}return _inherits(Collection,_Model),Collection}(_model2["default"]);exports["default"]=Collection,module.exports=exports["default"]},{"../model":2}],8:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Comment=function(_Model){function Comment(){_classCallCheck(this,Comment),_Model.apply(this,arguments)}return _inherits(Comment,_Model),Comment}(_model2["default"]);exports["default"]=Comment,module.exports=exports["default"]},{"../model":2}],9:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Draft=function(_Model){function Draft(){_classCallCheck(this,Draft),_Model.apply(this,arguments)}return _inherits(Draft,_Model),Draft}(_model2["default"]);exports["default"]=Draft,module.exports=exports["default"]},{"../model":2}],10:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),FeedAsset=function(_Model){function FeedAsset(){_classCallCheck(this,FeedAsset),_Model.apply(this,arguments)}return _inherits(FeedAsset,_Model),FeedAsset}(_model2["default"]);exports["default"]=FeedAsset,module.exports=exports["default"]},{"../model":2}],11:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Feed=function(_Model){function Feed(){_classCallCheck(this,Feed),_Model.apply(this,arguments)}return _inherits(Feed,_Model),Feed}(_model2["default"]);exports["default"]=Feed,module.exports=exports["default"]},{"../model":2}],12:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Hub=function(_Model){function Hub(){_classCallCheck(this,Hub),_Model.apply(this,arguments)}return _inherits(Hub,_Model),Hub}(_model2["default"]);exports["default"]=Hub,module.exports=exports["default"]},{"../model":2}],13:[function(require,module,exports){"use strict";function _interopRequire(obj){return obj&&obj.__esModule?obj["default"]:obj}exports.__esModule=!0;var _model=require("../model");exports.Base=_interopRequire(_model);var _account=require("./account");exports.Account=_interopRequire(_account);var _organization=require("./organization");exports.Organization=_interopRequire(_organization);var _app=require("./app");exports.App=_interopRequire(_app);var _asset=require("./asset");exports.Asset=_interopRequire(_asset);var _codeRevision=require("./code-revision");exports.CodeRevision=_interopRequire(_codeRevision);var _collection=require("./collection");exports.Collection=_interopRequire(_collection);var _comment=require("./comment");exports.Comment=_interopRequire(_comment);var _draft=require("./draft");exports.Draft=_interopRequire(_draft);var _feed=require("./feed");exports.Feed=_interopRequire(_feed);var _feedAsset=require("./feed-asset");exports.FeedAsset=_interopRequire(_feedAsset);var _hub=require("./hub");exports.Hub=_interopRequire(_hub);var _invite=require("./invite");exports.Invite=_interopRequire(_invite);var _like=require("./like");exports.Like=_interopRequire(_like);var _recommendation=require("./recommendation");exports.Recommendation=_interopRequire(_recommendation);var _style=require("./style");exports.Style=_interopRequire(_style);var _tag=require("./tag");exports.Tag=_interopRequire(_tag);var _user=require("./user");exports.User=_interopRequire(_user)},{"../model":2,"./account":3,"./app":4,"./asset":5,"./code-revision":6,"./collection":7,"./comment":8,"./draft":9,"./feed":11,"./feed-asset":10,"./hub":12,"./invite":14,"./like":15,"./organization":16,"./recommendation":17,"./style":18,"./tag":19,"./user":20}],14:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Invite=function(_Model){function Invite(){_classCallCheck(this,Invite),_Model.apply(this,arguments)}return _inherits(Invite,_Model),Invite}(_model2["default"]);exports["default"]=Invite,module.exports=exports["default"]},{"../model":2}],15:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Like=function(_Model){function Like(){_classCallCheck(this,Like),_Model.apply(this,arguments)}return _inherits(Like,_Model),Like}(_model2["default"]);exports["default"]=Like,module.exports=exports["default"]},{"../model":2}],16:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Organization=function(_Model){function Organization(){_classCallCheck(this,Organization),_Model.apply(this,arguments)}return _inherits(Organization,_Model),Organization}(_model2["default"]);exports["default"]=Organization,module.exports=exports["default"]},{"../model":2}],17:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Recommendation=function(_Model){function Recommendation(){_classCallCheck(this,Recommendation),_Model.apply(this,arguments)}return _inherits(Recommendation,_Model),Recommendation}(_model2["default"]);exports["default"]=Recommendation,module.exports=exports["default"]},{"../model":2}],18:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Style=function(_Model){function Style(){_classCallCheck(this,Style),_Model.apply(this,arguments)}return _inherits(Style,_Model),Style}(_model2["default"]);exports["default"]=Style,module.exports=exports["default"]},{"../model":2}],19:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),Tag=function(_Model){function Tag(){_classCallCheck(this,Tag),_Model.apply(this,arguments)}return _inherits(Tag,_Model),Tag}(_model2["default"]);exports["default"]=Tag,module.exports=exports["default"]},{"../model":2}],20:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}exports.__esModule=!0;var _model=require("../model"),_model2=_interopRequireDefault(_model),User=function(_Model){function User(){_classCallCheck(this,User),_Model.apply(this,arguments)}return _inherits(User,_Model),User.prototype.hasAccess=function(){return 0===this.access.status},User}(_model2["default"]);exports["default"]=User,module.exports=exports["default"]},{"../model":2}],21:[function(require,module,exports){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function singularize(string){return string.replace(/s$/,"")}function classify(string){return singularize(map(string.split("_"),function(s){return capitalize(s)}).join(""))}exports.__esModule=!0;var _resource=require("./resource"),_resource2=_interopRequireDefault(_resource),_models=require("./models"),models=_interopRequireWildcard(_models),map=require("lodash/collection/map"),each=require("lodash/collection/each"),extend=(require("lodash/collection/select"),require("lodash/object/extend")),last=require("lodash/array/last"),capitalize=require("lodash/string/capitalize"),isObject=require("lodash/lang/isObject"),isArray=require("lodash/lang/isArray"),buildRoute=(require("lodash/lang/isEmpty"),function(resource){var path,current=resource,segments=[];if(current.options.route)path=current.options.route;else{for(;current;){var paramName=current.options.routeSegment?parseRouteParams(current.options.routeSegment)[0]:current.options.paramName||"id";current!==resource&&(paramName=singularize(current.name)+capitalize(paramName));var routeSegment=current.options.routeSegment?current.options.routeSegment.replace(/\/:[^\/]+$/,"/:"+paramName):"/"+current.name+"/:"+paramName;segments.unshift(routeSegment),current=current.parent}path=segments.join("")}var params={};return each(parseRouteParams(path),function(paramName){params[paramName]=null}),{path:path,segments:segments,segment:segments[segments.length-1],params:params,paramName:resource.options.paramName||"id"}}),reRouteParams=/:[^\/]+/gi,parseRouteParams=function(route){return map(route.match(reRouteParams),function(param){return param.slice(1)})},buildKey=function(resource,name){for(var current=resource,segments=[];current;)segments.unshift(current.name),current=current.parent;return segments.join(".")},ResourceSchema=function(){function ResourceSchema(){_classCallCheck(this,ResourceSchema)}return ResourceSchema.prototype.$resource=function(){var key=arguments[0];if("undefined"==typeof key)throw new Error("$resource: key is undefined");var name=last(key.split(".")),params=!isObject(arguments[1])||arguments[1]instanceof _resource2["default"]?void 0:arguments[1],parentResource=arguments[2]||!params&&arguments[1]||void 0;if(parentResource){if(-1==parentResource.children.indexOf(name))throw new Error("$resource: key not found in parent resource.");key=parentResource.key+"."+name}return new this.constructor.resourceClasses[key](this,parentResource).includeParams(params)},ResourceSchema}();exports["default"]=ResourceSchema,ResourceSchema.defineSchema=function(){var API=this;API.resourceClasses={};var pointer=function pointer(bucket,parentPointer){return{current:null,resource:function(name,options){options=options||{};var parent=parentPointer?parentPointer.current:null,def={name:name,parent:parent,children:{},options:options};options.link&&(def.link=options.link),def.key=buildKey(def),def.route=buildRoute(def),def.actions=[],def.modelName=options.modelName||classify(name),this.current=bucket[name]=def;var resourceClass=function(_Resource){function resourceClass(){_classCallCheck(this,resourceClass),_Resource.apply(this,arguments)}return _inherits(resourceClass,_Resource),resourceClass}(_resource2["default"]);return resourceClass.definition=def,resourceClass.modelClass=models[def.modelName]||models.Base,API.resourceClasses[def.key]=resourceClass,this},open:function(){return pointer(this.current.children,this)},close:function(){return parentPointer},action:function(method,name,options){if(parentPointer&&parentPointer.current&&parentPointer.current.actions.push({method:method,name:name,options:options}),"resource"==options.on){var resourceClass=API.resourceClasses[parentPointer.current.key];resourceClass.prototype.hasOwnProperty("$"+name)||(resourceClass.prototype["$"+name]=function(){var _this=this,data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.request(extend({method:method,path:options.path||"/"+name},{data:data})).then(function(res){return isArray(res)?_this.hydrateCollection(res):_this.hydrateModel(res)})})}else if("member"==options.on){var modelClass=API.resourceClasses[parentPointer.current.key].modelClass;modelClass.prototype.hasOwnProperty("$"+name)||(modelClass.prototype["$"+name]=function(){var _this2=this,data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$resource().request(extend({method:method,path:options.path||"/"+name},{data:data})).then(function(res){return _this2.$resource().hydrateModel(res)})})}return this},get:function(){return this.action.call(this,"get",arguments[0],arguments[1])},post:function(){return this.action.call(this,"post",arguments[0],arguments[1])},put:function(){return this.action.call(this,"put",arguments[0],arguments[1])},patch:function(){return this.action.call(this,"patch",arguments[0],arguments[1])},"delete":function(){return this.action.call(this,"delete",arguments[0],arguments[1])}}};return extend({},pointer({}))},module.exports=exports["default"]},{"./models":13,"./resource":22,"lodash/array/last":24,"lodash/collection/each":27,"lodash/collection/map":33,"lodash/collection/select":34,"lodash/lang/isArray":107,"lodash/lang/isEmpty":108,"lodash/lang/isObject":112,"lodash/object/extend":116,"lodash/string/capitalize":122}],22:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function deepClone(obj){return JSON.parse(JSON.stringify(obj))}function singularize(string){return string.replace(/s$/,"")}exports.__esModule=!0;var map=require("lodash/collection/map"),each=require("lodash/collection/each"),detect=require("lodash/collection/detect"),where=require("lodash/collection/where"),findWhere=require("lodash/collection/findWhere"),extend=require("lodash/object/extend"),clone=require("lodash/lang/clone"),isObject=require("lodash/lang/isObject"),isArray=require("lodash/lang/isArray"),isEmpty=require("lodash/lang/isEmpty"),isNumber=require("lodash/lang/isNumber"),parseHTTPLinks=function(linksString){var links={};return linksString&&!isEmpty(linksString)&&each(linksString.split(","),function(link){var _link$split=link.split(";"),href=_link$split[0],rel=_link$split[1];href=href.replace(/<(.*)>/,"$1").trim(),rel=rel.replace(/rel="(.*)"/,"$1").trim(),links[rel]=href}),links},Resource=function(){function Resource(api,parentResource){var _this=this,inherit=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];_classCallCheck(this,Resource);var def=this.constructor.definition;if("undefined"==typeof def)throw new Error("Resource: Must supply a proper definition");if(this.api=api,this.options={},this.name=def.name,this.key=def.key,this.children=map(def.children,function(child,name){return name})||[],this.depth=parentResource?parentResource.depth+1:1,this.route=deepClone(def.route),this.route.queryParams={},parentResource){var parentParams={};each(parentResource.route.params,function(value,paramName){parentResource.key!=_this.key&&"id"==paramName&&(paramName=singularize(parentResource.name)+"Id"),parentParams[paramName]=value}),extend(this.route.params,parentParams),inherit&&(this.route.queryParams=clone(parentResource.route.queryParams))}this.parent=function(){return parentResource||def.parent&&this.api.$resource(def.parent.key)||null}}return Resource.prototype.createResource=function(){var inherit=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return new this.constructor(this.api,this,inherit)},Resource.prototype.request=function(){var _this2=this,options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.api.request(options.method||"get",this.buildRoute(options.path),extend({},this.options,{query:extend({},this.route.queryParams,options.query),data:options.data})).then(function(res){return _this2.setResponse(res),res.body})},Resource.prototype.buildRoute=function(appendPath){var route=this.route.segments.join("");return each(this.route.params,function(value,paramName){route=route.replace("/:"+paramName,value?"/"+value:"")}),appendPath&&(route+=appendPath),route},Resource.prototype.includeParams=function(params){var _this3=this;return each(params,function(value,paramName){_this3.route.params.hasOwnProperty(paramName)?_this3.route.params[paramName]=value:_this3.route.queryParams[paramName]=value}),this},Resource.prototype.query=function(params){return extend(this.route.queryParams,params),this},Resource.prototype.limit=function(rpp){return this.query({limit:rpp}),this},Resource.prototype.timeout=function(ms){return this.options.timeout=ms,this},Resource.prototype.$get=function(params){var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateModel(res)})},Resource.prototype.$find=function(params){params&&!isObject(params)&&(params={id:params});var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateModel(res)})},Resource.prototype.$all=function(params){var resource=this.createResource(!0).includeParams(params);return resource.request().then(function(res){return resource.hydrateCollection(res)})},Resource.prototype.$create=function(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],resource=this.createResource();return resource.hydrateModel(data,{newRecord:!0})},Resource.prototype.setResponse=function(res){this.status=res.status,this.headers=res.headers,res.headers&&res.headers.link&&(this.links=parseHTTPLinks(res.headers.link))},Resource.prototype.sync=function(data){data[this.route.paramName]&&(this.route.params[this.route.paramName]=data[this.route.paramName])},Resource.prototype.hydrateModel=function(data){var _this4=this,options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],model=new this.constructor.modelClass(data);return options.newRecord||(model.$newRecord=!1),this.sync(data),model.$resource=function(name){return isEmpty(name)?_this4:_this4.api.$resource(name,_this4)},model},Resource.prototype.hydrateCollection=function(data){var _this5=this,collection=map(data,function(item){var resource=_this5.createResource(),model=resource.hydrateModel(item);return model}),getPage=function(page){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return _this5.links.hasOwnProperty(page)?_this5.api.request("get",_this5.links[page]).then(function(res){if(options.append||options.prepend){_this5.setResponse(res);var method=options.append?"push":"unshift";return each(res.body,function(item){collection[method](_this5.hydrateModel(item))}),collection}return[]}):void 0},methods={$resource:function(){return _this5},$nextPage:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return getPage("next",options)},$prevPage:function(){var options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return getPage("prev",options)},$hasPage:function(name){return _this5.links.hasOwnProperty(name)},$find:function(id){return detect(collection,function(item){return item.id==id})},$findWhere:function(params){return findWhere(collection,params)},$where:function(params){return where(collection,params)},$create:function(){var data=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],resource=_this5.createResource();return resource.hydrateModel(data,{newRecord:!0})},$add:function(model,idx){void 0===model&&(model={});var applySorting=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return"object"!=typeof model||model instanceof _this5.constructor.modelClass||(model=collection.$create(model)),isNumber(idx)?collection.splice(idx,0,model):collection.push(model),applySorting&&collection.$sort(),model},$remove:function(arg){if(isArray(arg)){var models=arg;return each(models,function(model){collection.$remove(model)}),models}var idx;return isNumber(arg)?idx=arg:arg instanceof _this5.constructor.modelClass&&(idx=collection.indexOf(arg)),idx>=0&&idx<collection.length?collection.splice(idx,1)[0]:void 0},$reposition:function(fromIdx,toIdx){if(fromIdx!=toIdx&&fromIdx>=0&&fromIdx<collection.length&&toIdx>=0&&toIdx<collection.length){var model=collection.$remove(fromIdx);if(model)return collection.$add(model,toIdx,!1)}},$sort:function(){},$delete:function(model){var params=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return model instanceof _this5.constructor.modelClass?model.$delete(params).then(function(){return collection.$remove(model)}):void 0}};return extend(collection,methods),collection},Resource}();exports["default"]=Resource,module.exports=exports["default"]},{"lodash/collection/detect":26,"lodash/collection/each":27,"lodash/collection/findWhere":31,"lodash/collection/map":33,"lodash/collection/where":35,"lodash/lang/clone":105,"lodash/lang/isArray":107,"lodash/lang/isEmpty":108,"lodash/lang/isNumber":111,"lodash/lang/isObject":112,"lodash/object/extend":116}],23:[function(require,module,exports){var baseDifference=require("../internal/baseDifference"),baseFlatten=require("../internal/baseFlatten"),isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike"),restParam=require("../function/restParam"),difference=restParam(function(array,values){
return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,!1,!0)):[]});module.exports=difference},{"../function/restParam":36,"../internal/baseDifference":50,"../internal/baseFlatten":56,"../internal/isArrayLike":93,"../internal/isObjectLike":98}],24:[function(require,module,exports){function last(array){var length=array?array.length:0;return length?array[length-1]:void 0}module.exports=last},{}],25:[function(require,module,exports){module.exports=require("./every")},{"./every":28}],26:[function(require,module,exports){module.exports=require("./find")},{"./find":30}],27:[function(require,module,exports){module.exports=require("./forEach")},{"./forEach":32}],28:[function(require,module,exports){function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;return thisArg&&isIterateeCall(collection,predicate,thisArg)&&(predicate=void 0),("function"!=typeof predicate||void 0!==thisArg)&&(predicate=baseCallback(predicate,thisArg,3)),func(collection,predicate)}var arrayEvery=require("../internal/arrayEvery"),baseCallback=require("../internal/baseCallback"),baseEvery=require("../internal/baseEvery"),isArray=require("../lang/isArray"),isIterateeCall=require("../internal/isIterateeCall");module.exports=every},{"../internal/arrayEvery":40,"../internal/baseCallback":47,"../internal/baseEvery":52,"../internal/isIterateeCall":95,"../lang/isArray":107}],29:[function(require,module,exports){function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;return predicate=baseCallback(predicate,thisArg,3),func(collection,predicate)}var arrayFilter=require("../internal/arrayFilter"),baseCallback=require("../internal/baseCallback"),baseFilter=require("../internal/baseFilter"),isArray=require("../lang/isArray");module.exports=filter},{"../internal/arrayFilter":41,"../internal/baseCallback":47,"../internal/baseFilter":53,"../lang/isArray":107}],30:[function(require,module,exports){var baseEach=require("../internal/baseEach"),createFind=require("../internal/createFind"),find=createFind(baseEach);module.exports=find},{"../internal/baseEach":51,"../internal/createFind":81}],31:[function(require,module,exports){function findWhere(collection,source){return find(collection,baseMatches(source))}var baseMatches=require("../internal/baseMatches"),find=require("./find");module.exports=findWhere},{"../internal/baseMatches":67,"./find":30}],32:[function(require,module,exports){var arrayEach=require("../internal/arrayEach"),baseEach=require("../internal/baseEach"),createForEach=require("../internal/createForEach"),forEach=createForEach(arrayEach,baseEach);module.exports=forEach},{"../internal/arrayEach":39,"../internal/baseEach":51,"../internal/createForEach":82}],33:[function(require,module,exports){function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;return iteratee=baseCallback(iteratee,thisArg,3),func(collection,iteratee)}var arrayMap=require("../internal/arrayMap"),baseCallback=require("../internal/baseCallback"),baseMap=require("../internal/baseMap"),isArray=require("../lang/isArray");module.exports=map},{"../internal/arrayMap":42,"../internal/baseCallback":47,"../internal/baseMap":66,"../lang/isArray":107}],34:[function(require,module,exports){module.exports=require("./filter")},{"./filter":29}],35:[function(require,module,exports){function where(collection,source){return filter(collection,baseMatches(source))}var baseMatches=require("../internal/baseMatches"),filter=require("./filter");module.exports=where},{"../internal/baseMatches":67,"./filter":29}],36:[function(require,module,exports){function restParam(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(void 0===start?func.length-1:+start||0,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);++index<length;)rest[index]=args[start+index];switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=rest,func.apply(this,otherArgs)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam},{}],37:[function(require,module,exports){(function(global){function SetCache(values){var length=values?values.length:0;for(this.data={hash:nativeCreate(null),set:new Set};length--;)this.push(values[length])}var cachePush=require("./cachePush"),getNative=require("./getNative"),Set=getNative(global,"Set"),nativeCreate=getNative(Object,"create");SetCache.prototype.push=cachePush,module.exports=SetCache}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cachePush":76,"./getNative":88}],38:[function(require,module,exports){function arrayCopy(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}module.exports=arrayCopy},{}],39:[function(require,module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}module.exports=arrayEach},{}],40:[function(require,module,exports){function arrayEvery(array,predicate){for(var index=-1,length=array.length;++index<length;)if(!predicate(array[index],index,array))return!1;return!0}module.exports=arrayEvery},{}],41:[function(require,module,exports){function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index];predicate(value,index,array)&&(result[++resIndex]=value)}return result}module.exports=arrayFilter},{}],42:[function(require,module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}module.exports=arrayMap},{}],43:[function(require,module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}module.exports=arrayPush},{}],44:[function(require,module,exports){function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}module.exports=arraySome},{}],45:[function(require,module,exports){function assignWith(object,source,customizer){for(var index=-1,props=keys(source),length=props.length;++index<length;){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);(result===result?result===value:value!==value)&&(void 0!==value||key in object)||(object[key]=result)}return object}var keys=require("../object/keys");module.exports=assignWith},{"../object/keys":118}],46:[function(require,module,exports){function baseAssign(object,source){return null==source?object:baseCopy(source,keys(source),object)}var baseCopy=require("./baseCopy"),keys=require("../object/keys");module.exports=baseAssign},{"../object/keys":118,"./baseCopy":49}],47:[function(require,module,exports){function baseCallback(func,thisArg,argCount){var type=typeof func;return"function"==type?void 0===thisArg?func:bindCallback(func,thisArg,argCount):null==func?identity:"object"==type?baseMatches(func):void 0===thisArg?property(func):baseMatchesProperty(func,thisArg)}var baseMatches=require("./baseMatches"),baseMatchesProperty=require("./baseMatchesProperty"),bindCallback=require("./bindCallback"),identity=require("../utility/identity"),property=require("../utility/property");module.exports=baseCallback},{"../utility/identity":123,"../utility/property":124,"./baseMatches":67,"./baseMatchesProperty":68,"./bindCallback":73}],48:[function(require,module,exports){function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer&&(result=object?customizer(value,key,object):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return arrayCopy(value,result)}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag!=objectTag&&tag!=argsTag&&(!isFunc||object))return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return baseAssign(result,value)}stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];return stackA.push(value),stackB.push(result),(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)}),result}var arrayCopy=require("./arrayCopy"),arrayEach=require("./arrayEach"),baseAssign=require("./baseAssign"),baseForOwn=require("./baseForOwn"),initCloneArray=require("./initCloneArray"),initCloneByTag=require("./initCloneByTag"),initCloneObject=require("./initCloneObject"),isArray=require("../lang/isArray"),isObject=require("../lang/isObject"),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=!1;var objectProto=Object.prototype,objToString=objectProto.toString;module.exports=baseClone},{"../lang/isArray":107,"../lang/isObject":112,"./arrayCopy":38,"./arrayEach":39,"./baseAssign":46,"./baseForOwn":59,"./initCloneArray":90,"./initCloneByTag":91,"./initCloneObject":92}],49:[function(require,module,exports){function baseCopy(source,props,object){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],50:[function(require,module,exports){function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length)return result;var index=-1,indexOf=baseIndexOf,isCommon=!0,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;cache&&(indexOf=cacheIndexOf,isCommon=!1,values=cache);outer:for(;++index<length;){var value=array[index];if(isCommon&&value===value){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===value)continue outer;result.push(value)}else indexOf(values,value,0)<0&&result.push(value)}return result}var baseIndexOf=require("./baseIndexOf"),cacheIndexOf=require("./cacheIndexOf"),createCache=require("./createCache"),LARGE_ARRAY_SIZE=200;module.exports=baseDifference},{"./baseIndexOf":62,"./cacheIndexOf":75,"./createCache":80}],51:[function(require,module,exports){var baseForOwn=require("./baseForOwn"),createBaseEach=require("./createBaseEach"),baseEach=createBaseEach(baseForOwn);module.exports=baseEach},{"./baseForOwn":59,"./createBaseEach":78}],52:[function(require,module,exports){function baseEvery(collection,predicate){var result=!0;return baseEach(collection,function(value,index,collection){return result=!!predicate(value,index,collection)}),result}var baseEach=require("./baseEach");module.exports=baseEvery},{"./baseEach":51}],53:[function(require,module,exports){function baseFilter(collection,predicate){var result=[];return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}var baseEach=require("./baseEach");module.exports=baseFilter},{"./baseEach":51}],54:[function(require,module,exports){function baseFind(collection,predicate,eachFunc,retKey){var result;return eachFunc(collection,function(value,key,collection){return predicate(value,key,collection)?(result=retKey?key:value,!1):void 0}),result}module.exports=baseFind},{}],55:[function(require,module,exports){function baseFindIndex(array,predicate,fromRight){for(var length=array.length,index=fromRight?length:-1;fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}module.exports=baseFindIndex},{}],56:[function(require,module,exports){function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);for(var index=-1,length=array.length;++index<length;){var value=array[index];isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))?isDeep?baseFlatten(value,isDeep,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}var arrayPush=require("./arrayPush"),isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isArrayLike=require("./isArrayLike"),isObjectLike=require("./isObjectLike");module.exports=baseFlatten},{"../lang/isArguments":106,"../lang/isArray":107,"./arrayPush":43,"./isArrayLike":93,"./isObjectLike":98}],57:[function(require,module,exports){var createBaseFor=require("./createBaseFor"),baseFor=createBaseFor();module.exports=baseFor},{"./createBaseFor":79}],58:[function(require,module,exports){function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}var baseFor=require("./baseFor"),keysIn=require("../object/keysIn");module.exports=baseForIn},{"../object/keysIn":119,"./baseFor":57}],59:[function(require,module,exports){function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}var baseFor=require("./baseFor"),keys=require("../object/keys");module.exports=baseForOwn},{"../object/keys":118,"./baseFor":57}],60:[function(require,module,exports){function baseFunctions(object,props){for(var index=-1,length=props.length,resIndex=-1,result=[];++index<length;){var key=props[index];isFunction(object[key])&&(result[++resIndex]=key)}return result}var isFunction=require("../lang/isFunction");module.exports=baseFunctions},{"../lang/isFunction":109}],61:[function(require,module,exports){function baseGet(object,path,pathKey){if(null!=object){void 0!==pathKey&&pathKey in toObject(object)&&(path=[pathKey]);for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]];return index&&index==length?object:void 0}}var toObject=require("./toObject");module.exports=baseGet},{"./toObject":103}],62:[function(require,module,exports){function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex);for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}var indexOfNaN=require("./indexOfNaN");module.exports=baseIndexOf},{"./indexOfNaN":89}],63:[function(require,module,exports){function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}var baseIsEqualDeep=require("./baseIsEqualDeep"),isObject=require("../lang/isObject"),isObjectLike=require("./isObjectLike");module.exports=baseIsEqual},{"../lang/isObject":112,"./baseIsEqualDeep":64,"./isObjectLike":98}],64:[function(require,module,exports){function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=objToString.call(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=objToString.call(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)));var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag);if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}if(!isSameTag)return!1;stackA||(stackA=[]),stackB||(stackB=[]);for(var length=stackA.length;length--;)if(stackA[length]==object)return stackB[length]==other;stackA.push(object),stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);return stackA.pop(),stackB.pop(),result}var equalArrays=require("./equalArrays"),equalByTag=require("./equalByTag"),equalObjects=require("./equalObjects"),isArray=require("../lang/isArray"),isTypedArray=require("../lang/isTypedArray"),argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString;module.exports=baseIsEqualDeep},{"../lang/isArray":107,"../lang/isTypedArray":114,"./equalArrays":83,"./equalByTag":84,"./equalObjects":85}],65:[function(require,module,exports){function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=toObject(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var result=customizer?customizer(objValue,srcValue,key):void 0;if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,!0):result))return!1}}return!0}var baseIsEqual=require("./baseIsEqual"),toObject=require("./toObject");module.exports=baseIsMatch},{"./baseIsEqual":63,"./toObject":103}],66:[function(require,module,exports){function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];return baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)}),result}var baseEach=require("./baseEach"),isArrayLike=require("./isArrayLike");module.exports=baseMap},{"./baseEach":51,"./isArrayLike":93}],67:[function(require,module,exports){function baseMatches(source){var matchData=getMatchData(source);if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){return null==object?!1:object[key]===value&&(void 0!==value||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}var baseIsMatch=require("./baseIsMatch"),getMatchData=require("./getMatchData"),toObject=require("./toObject");module.exports=baseMatches},{"./baseIsMatch":65,"./getMatchData":87,"./toObject":103}],68:[function(require,module,exports){function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";return path=toPath(path),function(object){if(null==object)return!1;var key=pathKey;if(object=toObject(object),(isArr||!isCommon)&&!(key in object)){if(object=1==path.length?object:baseGet(object,baseSlice(path,0,-1)),null==object)return!1;key=last(path),object=toObject(object)}return object[key]===srcValue?void 0!==srcValue||key in object:baseIsEqual(srcValue,object[key],void 0,!0)}}var baseGet=require("./baseGet"),baseIsEqual=require("./baseIsEqual"),baseSlice=require("./baseSlice"),isArray=require("../lang/isArray"),isKey=require("./isKey"),isStrictComparable=require("./isStrictComparable"),last=require("../array/last"),toObject=require("./toObject"),toPath=require("./toPath");module.exports=baseMatchesProperty},{"../array/last":24,"../lang/isArray":107,"./baseGet":61,"./baseIsEqual":63,"./baseSlice":71,"./isKey":96,"./isStrictComparable":99,"./toObject":103,"./toPath":104}],69:[function(require,module,exports){function baseProperty(key){return function(object){return null==object?void 0:object[key]}}module.exports=baseProperty},{}],70:[function(require,module,exports){function basePropertyDeep(path){var pathKey=path+"";return path=toPath(path),function(object){return baseGet(object,path,pathKey)}}var baseGet=require("./baseGet"),toPath=require("./toPath");module.exports=basePropertyDeep},{"./baseGet":61,"./toPath":104}],71:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length;start=null==start?0:+start||0,0>start&&(start=-start>length?0:length+start),end=void 0===end||end>length?length:+end||0,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}module.exports=baseSlice},{}],72:[function(require,module,exports){function baseToString(value){return null==value?"":value+""}module.exports=baseToString},{}],73:[function(require,module,exports){function bindCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if(void 0===thisArg)return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}var identity=require("../utility/identity");module.exports=bindCallback},{"../utility/identity":123}],74:[function(require,module,exports){(function(global){function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);return view.set(new Uint8Array(buffer)),result}var ArrayBuffer=global.ArrayBuffer,Uint8Array=global.Uint8Array;module.exports=bufferClone}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],75:[function(require,module,exports){function cacheIndexOf(cache,value){var data=cache.data,result="string"==typeof value||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}var isObject=require("../lang/isObject");module.exports=cacheIndexOf},{"../lang/isObject":112}],76:[function(require,module,exports){function cachePush(value){var data=this.data;"string"==typeof value||isObject(value)?data.set.add(value):data.hash[value]=!0}var isObject=require("../lang/isObject");module.exports=cachePush},{"../lang/isObject":112}],77:[function(require,module,exports){function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=null==object?0:sources.length,customizer=length>2?sources[length-2]:void 0,guard=length>2?sources[2]:void 0,thisArg=length>1?sources[length-1]:void 0;for("function"==typeof customizer?(customizer=bindCallback(customizer,thisArg,5),length-=2):(customizer="function"==typeof thisArg?thisArg:void 0,length-=customizer?1:0),guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?void 0:customizer,length=1);++index<length;){var source=sources[index];source&&assigner(object,source,customizer)}return object})}var bindCallback=require("./bindCallback"),isIterateeCall=require("./isIterateeCall"),restParam=require("../function/restParam");module.exports=createAssigner},{"../function/restParam":36,"./bindCallback":73,"./isIterateeCall":95}],78:[function(require,module,exports){function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length))return eachFunc(collection,iteratee);for(var index=fromRight?length:-1,iterable=toObject(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}var getLength=require("./getLength"),isLength=require("./isLength"),toObject=require("./toObject");module.exports=createBaseEach},{"./getLength":86,"./isLength":97,"./toObject":103}],79:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;fromRight?index--:++index<length;){var key=props[index];if(iteratee(iterable[key],key,iterable)===!1)break}return object}}var toObject=require("./toObject");module.exports=createBaseFor},{"./toObject":103}],80:[function(require,module,exports){(function(global){function createCache(values){return nativeCreate&&Set?new SetCache(values):null}var SetCache=require("./SetCache"),getNative=require("./getNative"),Set=getNative(global,"Set"),nativeCreate=getNative(Object,"create");module.exports=createCache}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./SetCache":37,"./getNative":88}],81:[function(require,module,exports){function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){if(predicate=baseCallback(predicate,thisArg,3),isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:void 0}return baseFind(collection,predicate,eachFunc)}}var baseCallback=require("./baseCallback"),baseFind=require("./baseFind"),baseFindIndex=require("./baseFindIndex"),isArray=require("../lang/isArray");module.exports=createFind},{"../lang/isArray":107,"./baseCallback":47,"./baseFind":54,"./baseFindIndex":55}],82:[function(require,module,exports){function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return"function"==typeof iteratee&&void 0===thisArg&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}var bindCallback=require("./bindCallback"),isArray=require("../lang/isArray");module.exports=createForEach},{"../lang/isArray":107,"./bindCallback":73}],83:[function(require,module,exports){function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength))return!1;for(;++index<arrLength;){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):void 0;if(void 0!==result){if(result)continue;return!1}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}))return!1}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))return!1}return!0}var arraySome=require("./arraySome");module.exports=equalArrays},{"./arraySome":44}],84:[function(require,module,exports){function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return!1}var boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",numberTag="[object Number]",regexpTag="[object RegExp]",stringTag="[object String]";module.exports=equalByTag},{}],85:[function(require,module,exports){function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key)))return!1}for(var skipCtor=isLoose;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):void 0;if(!(void 0===result?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result))return!1;skipCtor||(skipCtor="constructor"==key)}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor))return!1}return!0}var keys=require("../object/keys"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=equalObjects},{"../object/keys":118}],86:[function(require,module,exports){var baseProperty=require("./baseProperty"),getLength=baseProperty("length");module.exports=getLength},{"./baseProperty":69}],87:[function(require,module,exports){function getMatchData(object){for(var result=pairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}var isStrictComparable=require("./isStrictComparable"),pairs=require("../object/pairs");module.exports=getMatchData},{"../object/pairs":120,"./isStrictComparable":99}],88:[function(require,module,exports){function getNative(object,key){var value=null==object?void 0:object[key];return isNative(value)?value:void 0}var isNative=require("../lang/isNative");module.exports=getNative},{"../lang/isNative":110}],89:[function(require,module,exports){function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:++index<length;){var other=array[index];if(other!==other)return index}return-1}module.exports=indexOfNaN},{}],90:[function(require,module,exports){function initCloneArray(array){var length=array.length,result=new array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=initCloneArray},{}],91:[function(require,module,exports){function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}var bufferClone=require("./bufferClone"),boolTag="[object Boolean]",dateTag="[object Date]",numberTag="[object Number]",regexpTag="[object RegExp]",stringTag="[object String]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/;module.exports=initCloneByTag},{"./bufferClone":74}],92:[function(require,module,exports){function initCloneObject(object){var Ctor=object.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor||(Ctor=Object),new Ctor;
}module.exports=initCloneObject},{}],93:[function(require,module,exports){function isArrayLike(value){return null!=value&&isLength(getLength(value))}var getLength=require("./getLength"),isLength=require("./isLength");module.exports=isArrayLike},{"./getLength":86,"./isLength":97}],94:[function(require,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991;module.exports=isIndex},{}],95:[function(require,module,exports){function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;if("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object){var other=object[index];return value===value?value===other:other!==other}return!1}var isArrayLike=require("./isArrayLike"),isIndex=require("./isIndex"),isObject=require("../lang/isObject");module.exports=isIterateeCall},{"../lang/isObject":112,"./isArrayLike":93,"./isIndex":94}],96:[function(require,module,exports){function isKey(value,object){var type=typeof value;if("string"==type&&reIsPlainProp.test(value)||"number"==type)return!0;if(isArray(value))return!1;var result=!reIsDeepProp.test(value);return result||null!=object&&value in toObject(object)}var isArray=require("../lang/isArray"),toObject=require("./toObject"),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;module.exports=isKey},{"../lang/isArray":107,"./toObject":103}],97:[function(require,module,exports){function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}var MAX_SAFE_INTEGER=9007199254740991;module.exports=isLength},{}],98:[function(require,module,exports){function isObjectLike(value){return!!value&&"object"==typeof value}module.exports=isObjectLike},{}],99:[function(require,module,exports){function isStrictComparable(value){return value===value&&!isObject(value)}var isObject=require("../lang/isObject");module.exports=isStrictComparable},{"../lang/isObject":112}],100:[function(require,module,exports){function pickByArray(object,props){object=toObject(object);for(var index=-1,length=props.length,result={};++index<length;){var key=props[index];key in object&&(result[key]=object[key])}return result}var toObject=require("./toObject");module.exports=pickByArray},{"./toObject":103}],101:[function(require,module,exports){function pickByCallback(object,predicate){var result={};return baseForIn(object,function(value,key,object){predicate(value,key,object)&&(result[key]=value)}),result}var baseForIn=require("./baseForIn");module.exports=pickByCallback},{"./baseForIn":58}],102:[function(require,module,exports){function shimKeys(object){for(var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object)),index=-1,result=[];++index<propsLength;){var key=props[index];(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key))&&result.push(key)}return result}var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("./isIndex"),isLength=require("./isLength"),keysIn=require("../object/keysIn"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=shimKeys},{"../lang/isArguments":106,"../lang/isArray":107,"../object/keysIn":119,"./isIndex":94,"./isLength":97}],103:[function(require,module,exports){function toObject(value){return isObject(value)?value:Object(value)}var isObject=require("../lang/isObject");module.exports=toObject},{"../lang/isObject":112}],104:[function(require,module,exports){function toPath(value){if(isArray(value))return value;var result=[];return baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}var baseToString=require("./baseToString"),isArray=require("../lang/isArray"),rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g;module.exports=toPath},{"../lang/isArray":107,"./baseToString":72}],105:[function(require,module,exports){function clone(value,isDeep,customizer,thisArg){return isDeep&&"boolean"!=typeof isDeep&&isIterateeCall(value,isDeep,customizer)?isDeep=!1:"function"==typeof isDeep&&(thisArg=customizer,customizer=isDeep,isDeep=!1),"function"==typeof customizer?baseClone(value,isDeep,bindCallback(customizer,thisArg,3)):baseClone(value,isDeep)}var baseClone=require("../internal/baseClone"),bindCallback=require("../internal/bindCallback"),isIterateeCall=require("../internal/isIterateeCall");module.exports=clone},{"../internal/baseClone":48,"../internal/bindCallback":73,"../internal/isIterateeCall":95}],106:[function(require,module,exports){function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArrayLike=require("../internal/isArrayLike"),isObjectLike=require("../internal/isObjectLike"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,propertyIsEnumerable=objectProto.propertyIsEnumerable;module.exports=isArguments},{"../internal/isArrayLike":93,"../internal/isObjectLike":98}],107:[function(require,module,exports){var getNative=require("../internal/getNative"),isLength=require("../internal/isLength"),isObjectLike=require("../internal/isObjectLike"),arrayTag="[object Array]",objectProto=Object.prototype,objToString=objectProto.toString,nativeIsArray=getNative(Array,"isArray"),isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{"../internal/getNative":88,"../internal/isLength":97,"../internal/isObjectLike":98}],108:[function(require,module,exports){function isEmpty(value){return null==value?!0:isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))?!value.length:!keys(value).length}var isArguments=require("./isArguments"),isArray=require("./isArray"),isArrayLike=require("../internal/isArrayLike"),isFunction=require("./isFunction"),isObjectLike=require("../internal/isObjectLike"),isString=require("./isString"),keys=require("../object/keys");module.exports=isEmpty},{"../internal/isArrayLike":93,"../internal/isObjectLike":98,"../object/keys":118,"./isArguments":106,"./isArray":107,"./isFunction":109,"./isString":113}],109:[function(require,module,exports){function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}var isObject=require("./isObject"),funcTag="[object Function]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isFunction},{"./isObject":112}],110:[function(require,module,exports){function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(fnToString.call(value)):isObjectLike(value)&&reIsHostCtor.test(value)}var isFunction=require("./isFunction"),isObjectLike=require("../internal/isObjectLike"),reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=isNative},{"../internal/isObjectLike":98,"./isFunction":109}],111:[function(require,module,exports){function isNumber(value){return"number"==typeof value||isObjectLike(value)&&objToString.call(value)==numberTag}var isObjectLike=require("../internal/isObjectLike"),numberTag="[object Number]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isNumber},{"../internal/isObjectLike":98}],112:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}module.exports=isObject},{}],113:[function(require,module,exports){function isString(value){return"string"==typeof value||isObjectLike(value)&&objToString.call(value)==stringTag}var isObjectLike=require("../internal/isObjectLike"),stringTag="[object String]",objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isString},{"../internal/isObjectLike":98}],114:[function(require,module,exports){function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}var isLength=require("../internal/isLength"),isObjectLike=require("../internal/isObjectLike"),argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectProto=Object.prototype,objToString=objectProto.toString;module.exports=isTypedArray},{"../internal/isLength":97,"../internal/isObjectLike":98}],115:[function(require,module,exports){var assignWith=require("../internal/assignWith"),baseAssign=require("../internal/baseAssign"),createAssigner=require("../internal/createAssigner"),assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},{"../internal/assignWith":45,"../internal/baseAssign":46,"../internal/createAssigner":77}],116:[function(require,module,exports){module.exports=require("./assign")},{"./assign":115}],117:[function(require,module,exports){function functions(object){return baseFunctions(object,keysIn(object))}var baseFunctions=require("../internal/baseFunctions"),keysIn=require("./keysIn");module.exports=functions},{"../internal/baseFunctions":60,"./keysIn":119}],118:[function(require,module,exports){var getNative=require("../internal/getNative"),isArrayLike=require("../internal/isArrayLike"),isObject=require("../lang/isObject"),shimKeys=require("../internal/shimKeys"),nativeKeys=getNative(Object,"keys"),keys=nativeKeys?function(object){var Ctor=null==object?void 0:object.constructor;return"function"==typeof Ctor&&Ctor.prototype===object||"function"!=typeof object&&isArrayLike(object)?shimKeys(object):isObject(object)?nativeKeys(object):[]}:shimKeys;module.exports=keys},{"../internal/getNative":88,"../internal/isArrayLike":93,"../internal/shimKeys":102,"../lang/isObject":112}],119:[function(require,module,exports){function keysIn(object){if(null==object)return[];isObject(object)||(object=Object(object));var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;for(var Ctor=object.constructor,index=-1,isProto="function"==typeof Ctor&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;++index<length;)result[index]=index+"";for(var key in object)skipIndexes&&isIndex(key,length)||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key);return result}var isArguments=require("../lang/isArguments"),isArray=require("../lang/isArray"),isIndex=require("../internal/isIndex"),isLength=require("../internal/isLength"),isObject=require("../lang/isObject"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;module.exports=keysIn},{"../internal/isIndex":94,"../internal/isLength":97,"../lang/isArguments":106,"../lang/isArray":107,"../lang/isObject":112}],120:[function(require,module,exports){function pairs(object){object=toObject(object);for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}var keys=require("./keys"),toObject=require("../internal/toObject");module.exports=pairs},{"../internal/toObject":103,"./keys":118}],121:[function(require,module,exports){var baseFlatten=require("../internal/baseFlatten"),bindCallback=require("../internal/bindCallback"),pickByArray=require("../internal/pickByArray"),pickByCallback=require("../internal/pickByCallback"),restParam=require("../function/restParam"),pick=restParam(function(object,props){return null==object?{}:"function"==typeof props[0]?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});module.exports=pick},{"../function/restParam":36,"../internal/baseFlatten":56,"../internal/bindCallback":73,"../internal/pickByArray":100,"../internal/pickByCallback":101}],122:[function(require,module,exports){function capitalize(string){return string=baseToString(string),string&&string.charAt(0).toUpperCase()+string.slice(1)}var baseToString=require("../internal/baseToString");module.exports=capitalize},{"../internal/baseToString":72}],123:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],124:[function(require,module,exports){function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var baseProperty=require("../internal/baseProperty"),basePropertyDeep=require("../internal/basePropertyDeep"),isKey=require("../internal/isKey");module.exports=property},{"../internal/baseProperty":69,"../internal/basePropertyDeep":70,"../internal/isKey":96}],125:[function(require,module,exports){function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function isObject(obj){return obj===Object(obj)}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)null!=obj[key]&&pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]));return pairs.join("&")}function parseString(str){for(var parts,pair,obj={},pairs=str.split("&"),i=0,len=pairs.length;len>i;++i)pair=pairs[i],parts=pair.split("="),obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1]);return obj}function parseHeader(str){var index,line,field,val,lines=str.split(/\r?\n/),fields={};lines.pop();for(var i=0,len=lines.length;len>i;++i)line=lines[i],index=line.indexOf(":"),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})}function Response(req,options){options=options||{},this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());var tryAnotherContentType=this.xhr.getResponseHeader("content-type");tryAnotherContentType&&tryAnotherContentType.length>0&&(this.header["content-type"]=tryAnotherContentType),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;Emitter.call(this),this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,self.callback(err)}if(self.emit("response",res),err)return self.callback(err,res);if(res.status>=200&&res.status<300)return self.callback(err,res);var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)})}function request(method,url){return"function"==typeof url?new Request("GET",method).end(url):1==arguments.length?new Request("GET",method):new Request(method,url)}var root,Emitter=require("emitter"),reduce=require("reduce");root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(field){return this.header[field.toLowerCase()]},Response.prototype.setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]},Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return parse&&str&&(str.length||str instanceof Object)?parse(str):null},Response.prototype.setStatusProperties=function(status){1223===status&&(status=204);var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.clientError=4==type,this.serverError=5==type,this.error=4==type||5==type?this.toError():!1,this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.notFound=404==status,this.forbidden=403==status},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype),Request.prototype.use=function(fn){return fn(this),this},Request.prototype.timeout=function(ms){return this._timeout=ms,this},Request.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},Request.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},Request.prototype.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},Request.prototype.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},Request.prototype.getHeader=function(field){return this._header[field.toLowerCase()]},Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.parse=function(fn){return this._parser=fn,this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass){var str=btoa(user+":"+pass);return this.set("Authorization","Basic "+str),this},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.field=function(name,val){return this._formData||(this._formData=new root.FormData),this._formData.append(name,val),this},Request.prototype.attach=function(field,file,filename){return this._formData||(this._formData=new root.FormData),this._formData.append(field,file,filename),this},Request.prototype.send=function(data){var obj=isObject(data),type=this.getHeader("Content-Type");if(obj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==type?this._data=this._data?this._data+"&"+data:data:this._data=(this._data||"")+data):this._data=data;return!obj||isHost(data)?this:(type||this.type("json"),this)},Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout(),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Origin is not allowed by Access-Control-Allow-Origin");err.crossDomain=!0,this.callback(err)},Request.prototype.timeoutError=function(){var timeout=this._timeout,err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout,this.callback(err)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(fn){var self=this,xhr=this.xhr=request.getXHR(),query=this._query.join("&"),timeout=this._timeout,data=this._formData||this._data;this._callback=fn||noop,xhr.onreadystatechange=function(){if(4==xhr.readyState){var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self.timeoutError();if(self.aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),self.emit("progress",e)};this.hasListeners("progress")&&(xhr.onprogress=handleProgress);try{xhr.upload&&this.hasListeners("progress")&&(xhr.upload.onprogress=handleProgress)}catch(e){}if(timeout&&!this._timer&&(this._timer=setTimeout(function(){self.timedout=!0,self.abort()},timeout)),query&&(query=request.serializeObject(query),this.url+=~this.url.indexOf("?")?"&"+query:"?"+query),xhr.open(this.method,this.url,!0),this._withCredentials&&(xhr.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var contentType=this.getHeader("Content-Type"),serialize=this._parser||request.serialize[contentType?contentType.split(";")[0]:""];serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&xhr.setRequestHeader(field,this.header[field]);return this.emit("request",this),xhr.send(data),this},Request.prototype.then=function(fulfill,reject){return this.end(function(err,res){err?reject(err):fulfill(res)})},request.Request=Request,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=function(url,fn){var req=request("DELETE",url);return fn&&req.end(fn),req},request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},module.exports=request},{emitter:126,reduce:127}],126:[function(require,module,exports){function Emitter(obj){return obj?mixin(obj):void 0}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)}var self=this;return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;len>i;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],127:[function(require,module,exports){module.exports=function(arr,fn,initial){for(var idx=0,len=arr.length,curr=3==arguments.length?initial:arr[idx++];len>idx;)curr=fn.call(null,curr,arr[idx],++idx,arr);return curr}},{}]},{},[1])(1)});